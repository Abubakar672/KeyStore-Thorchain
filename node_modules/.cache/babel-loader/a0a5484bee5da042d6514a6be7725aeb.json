{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar _exportNames = {\n  encodeNumber: true,\n  encodeBool: true,\n  encodeString: true,\n  encodeTime: true,\n  convertObjectToSignBytes: true,\n  marshalBinary: true,\n  marshalBinaryBare: true,\n  encodeBinary: true,\n  encodeBinaryByteArray: true,\n  encodeObjectBinary: true,\n  encodeArrayBinary: true\n};\nexports.encodeArrayBinary = exports.encodeObjectBinary = exports.encodeBinaryByteArray = exports.encodeBinary = exports.marshalBinaryBare = exports.marshalBinary = exports.convertObjectToSignBytes = exports.encodeTime = exports.encodeString = exports.encodeBool = exports.encodeNumber = void 0;\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar _is_js = _interopRequireDefault(require(\"is_js\"));\n\nvar _protocolBuffersEncodings = require(\"protocol-buffers-encodings\");\n\nvar _encoderHelper = _interopRequireDefault(require(\"../../utils/encoderHelper\"));\n\nvar _varint = require(\"./varint\");\n\nObject.keys(_varint).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _varint[key];\n    }\n  });\n});\n\nvar sortObject = function sortObject(obj) {\n  if (obj === null) return null;\n  if ((0, _typeof2[\"default\"])(obj) !== \"object\") return obj; // arrays have typeof \"object\" in js!\n\n  if (Array.isArray(obj)) return obj.map(sortObject);\n  var sortedKeys = Object.keys(obj).sort();\n  var result = {};\n  sortedKeys.forEach(function (key) {\n    result[key] = sortObject(obj[key]);\n  });\n  return result;\n};\n/**\n * encode number\n * @category amino\n * @param num\n */\n\n\nvar encodeNumber = function encodeNumber(num) {\n  return _varint.UVarInt.encode(num);\n};\n/**\n * encode bool\n * @category amino\n * @param b\n */\n\n\nexports.encodeNumber = encodeNumber;\n\nvar encodeBool = function encodeBool(b) {\n  return b ? _varint.UVarInt.encode(1) : _varint.UVarInt.encode(0);\n};\n/**\n * encode string\n * @category amino\n * @param str\n */\n\n\nexports.encodeBool = encodeBool;\n\nvar encodeString = function encodeString(str) {\n  var buf = Buffer.alloc(_protocolBuffersEncodings.string.encodingLength(str));\n  return _protocolBuffersEncodings.string.encode(str, buf, 0);\n};\n/**\n * encode time\n * @category amino\n * @param value\n */\n\n\nexports.encodeString = encodeString;\n\nvar encodeTime = function encodeTime(value) {\n  var millis = new Date(value).getTime();\n  var seconds = Math.floor(millis / 1000);\n  var nanos = Number(seconds.toString().padEnd(9, \"0\"));\n  var buffer = Buffer.alloc(14); // buffer[0] = (1 << 3) | 1 // field 1, typ3 1\n\n  buffer.writeInt32LE(1 << 3 | 1, 0);\n  buffer.writeUInt32LE(seconds, 1); // buffer[9] = (2 << 3) | 5 // field 2, typ3 5\n\n  buffer.writeInt32LE(2 << 3 | 5, 9);\n  buffer.writeUInt32LE(nanos, 10);\n  return buffer;\n};\n/**\n * @category amino\n * @param obj -- {object}\n * @return bytes {Buffer}\n */\n\n\nexports.encodeTime = encodeTime;\n\nvar convertObjectToSignBytes = function convertObjectToSignBytes(obj) {\n  return Buffer.from(JSON.stringify(sortObject(obj)));\n};\n/**\n * js amino MarshalBinary\n * @category amino\n * @param {Object} obj\n *  */\n\n\nexports.convertObjectToSignBytes = convertObjectToSignBytes;\n\nvar marshalBinary = function marshalBinary(obj) {\n  if (!_is_js[\"default\"].object(obj)) throw new TypeError(\"data must be an object\");\n  return encodeBinary(obj, -1, true).toString(\"hex\");\n};\n/**\n * js amino MarshalBinaryBare\n * @category amino\n * @param {Object} obj\n *  */\n\n\nexports.marshalBinary = marshalBinary;\n\nvar marshalBinaryBare = function marshalBinaryBare(obj) {\n  if (!_is_js[\"default\"].object(obj)) throw new TypeError(\"data must be an object\");\n  return encodeBinary(obj).toString(\"hex\");\n};\n/**\n * This is the main entrypoint for encoding all types in binary form.\n * @category amino\n * @param {*} js data type (not null, not undefined)\n * @param {Number} field index of object\n * @param {Boolean} isByteLenPrefix\n * @return {Buffer} binary of object.\n */\n\n\nexports.marshalBinaryBare = marshalBinaryBare;\n\nvar encodeBinary = function encodeBinary(val, fieldNum, isByteLenPrefix) {\n  if (val === null || val === undefined) throw new TypeError(\"unsupported type\");\n\n  if (Buffer.isBuffer(val)) {\n    if (isByteLenPrefix) {\n      return Buffer.concat([_varint.UVarInt.encode(val.length), val]);\n    }\n\n    return val;\n  }\n\n  if (_is_js[\"default\"].array(val)) {\n    return encodeArrayBinary(fieldNum, val, isByteLenPrefix);\n  }\n\n  if (_is_js[\"default\"].number(val)) {\n    return encodeNumber(val);\n  }\n\n  if (_is_js[\"default\"][\"boolean\"](val)) {\n    return encodeBool(val);\n  }\n\n  if (_is_js[\"default\"].string(val)) {\n    return encodeString(val);\n  }\n\n  if (_is_js[\"default\"].object(val)) {\n    return encodeObjectBinary(val, isByteLenPrefix);\n  }\n\n  return;\n};\n/**\n * prefixed with bytes length\n * @category amino\n * @param {Buffer} bytes\n * @return {Buffer} with bytes length prefixed\n */\n\n\nexports.encodeBinary = encodeBinary;\n\nvar encodeBinaryByteArray = function encodeBinaryByteArray(bytes) {\n  var lenPrefix = bytes.length;\n  return Buffer.concat([_varint.UVarInt.encode(lenPrefix), bytes]);\n};\n/**\n * @category amino\n * @param {Object} obj\n * @return {Buffer} with bytes length prefixed\n */\n\n\nexports.encodeBinaryByteArray = encodeBinaryByteArray;\n\nvar encodeObjectBinary = function encodeObjectBinary(obj, isByteLenPrefix) {\n  var bufferArr = [];\n  Object.keys(obj).forEach(function (key, index) {\n    if (key === \"aminoPrefix\" || key === \"version\") return;\n    if (isDefaultValue(obj[key])) return;\n\n    if (_is_js[\"default\"].array(obj[key]) && obj[key].length > 0) {\n      bufferArr.push(encodeArrayBinary(index, obj[key]));\n    } else {\n      bufferArr.push(encodeTypeAndField(index, obj[key]));\n      bufferArr.push(encodeBinary(obj[key], index, true));\n    }\n  });\n  var bytes = Buffer.concat(bufferArr); // add prefix\n\n  if (obj.aminoPrefix) {\n    var prefix = Buffer.from(obj.aminoPrefix, \"hex\");\n    bytes = Buffer.concat([prefix, bytes]);\n  } // Write byte-length prefixed.\n\n\n  if (isByteLenPrefix) {\n    var lenBytes = _varint.UVarInt.encode(bytes.length);\n\n    bytes = Buffer.concat([lenBytes, bytes]);\n  }\n\n  return bytes;\n};\n/**\n * @category amino\n * @param {Number} fieldNum object field index\n * @param {Array} arr\n * @param {Boolean} isByteLenPrefix\n * @return {Buffer} bytes of array\n */\n\n\nexports.encodeObjectBinary = encodeObjectBinary;\n\nvar encodeArrayBinary = function encodeArrayBinary(fieldNum, arr, isByteLenPrefix) {\n  var result = [];\n  arr.forEach(function (item) {\n    result.push(encodeTypeAndField(fieldNum, item));\n\n    if (isDefaultValue(item)) {\n      result.push(Buffer.from(\"00\", \"hex\"));\n      return;\n    }\n\n    result.push(encodeBinary(item, fieldNum, true));\n  }); //encode length\n\n  if (isByteLenPrefix) {\n    var length = result.reduce(function (prev, item) {\n      return prev + item.length;\n    }, 0);\n    result.unshift(_varint.UVarInt.encode(length));\n  }\n\n  return Buffer.concat(result);\n}; // Write field key.\n\n\nexports.encodeArrayBinary = encodeArrayBinary;\n\nvar encodeTypeAndField = function encodeTypeAndField(index, field) {\n  index = Number(index);\n  var value = index + 1 << 3 | (0, _encoderHelper[\"default\"])(field);\n  return _varint.UVarInt.encode(value);\n};\n\nvar isDefaultValue = function isDefaultValue(obj) {\n  if (obj === null) return false;\n  return _is_js[\"default\"].number(obj) && obj === 0 || _is_js[\"default\"].string(obj) && obj === \"\" || _is_js[\"default\"].array(obj) && obj.length === 0 || _is_js[\"default\"][\"boolean\"](obj) && !obj;\n};","map":{"version":3,"sources":["/home/abubakar/Desktop/KeyStore-Thorchain/node_modules/@binance-chain/javascript-sdk/lib/amino/encoder/index.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","_exportNames","encodeNumber","encodeBool","encodeString","encodeTime","convertObjectToSignBytes","marshalBinary","marshalBinaryBare","encodeBinary","encodeBinaryByteArray","encodeObjectBinary","encodeArrayBinary","_typeof2","_is_js","_protocolBuffersEncodings","_encoderHelper","_varint","keys","forEach","key","prototype","hasOwnProperty","call","enumerable","get","sortObject","obj","Array","isArray","map","sortedKeys","sort","result","num","UVarInt","encode","b","str","buf","Buffer","alloc","string","encodingLength","millis","Date","getTime","seconds","Math","floor","nanos","Number","toString","padEnd","buffer","writeInt32LE","writeUInt32LE","from","JSON","stringify","object","TypeError","val","fieldNum","isByteLenPrefix","undefined","isBuffer","concat","length","array","number","bytes","lenPrefix","bufferArr","index","isDefaultValue","push","encodeTypeAndField","aminoPrefix","prefix","lenBytes","arr","item","reduce","prev","unshift","field"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar _exportNames = {\n  encodeNumber: true,\n  encodeBool: true,\n  encodeString: true,\n  encodeTime: true,\n  convertObjectToSignBytes: true,\n  marshalBinary: true,\n  marshalBinaryBare: true,\n  encodeBinary: true,\n  encodeBinaryByteArray: true,\n  encodeObjectBinary: true,\n  encodeArrayBinary: true\n};\nexports.encodeArrayBinary = exports.encodeObjectBinary = exports.encodeBinaryByteArray = exports.encodeBinary = exports.marshalBinaryBare = exports.marshalBinary = exports.convertObjectToSignBytes = exports.encodeTime = exports.encodeString = exports.encodeBool = exports.encodeNumber = void 0;\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar _is_js = _interopRequireDefault(require(\"is_js\"));\n\nvar _protocolBuffersEncodings = require(\"protocol-buffers-encodings\");\n\nvar _encoderHelper = _interopRequireDefault(require(\"../../utils/encoderHelper\"));\n\nvar _varint = require(\"./varint\");\n\nObject.keys(_varint).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  if (Object.prototype.hasOwnProperty.call(_exportNames, key)) return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _varint[key];\n    }\n  });\n});\n\nvar sortObject = function sortObject(obj) {\n  if (obj === null) return null;\n  if ((0, _typeof2[\"default\"])(obj) !== \"object\") return obj; // arrays have typeof \"object\" in js!\n\n  if (Array.isArray(obj)) return obj.map(sortObject);\n  var sortedKeys = Object.keys(obj).sort();\n  var result = {};\n  sortedKeys.forEach(function (key) {\n    result[key] = sortObject(obj[key]);\n  });\n  return result;\n};\n/**\n * encode number\n * @category amino\n * @param num\n */\n\n\nvar encodeNumber = function encodeNumber(num) {\n  return _varint.UVarInt.encode(num);\n};\n/**\n * encode bool\n * @category amino\n * @param b\n */\n\n\nexports.encodeNumber = encodeNumber;\n\nvar encodeBool = function encodeBool(b) {\n  return b ? _varint.UVarInt.encode(1) : _varint.UVarInt.encode(0);\n};\n/**\n * encode string\n * @category amino\n * @param str\n */\n\n\nexports.encodeBool = encodeBool;\n\nvar encodeString = function encodeString(str) {\n  var buf = Buffer.alloc(_protocolBuffersEncodings.string.encodingLength(str));\n  return _protocolBuffersEncodings.string.encode(str, buf, 0);\n};\n/**\n * encode time\n * @category amino\n * @param value\n */\n\n\nexports.encodeString = encodeString;\n\nvar encodeTime = function encodeTime(value) {\n  var millis = new Date(value).getTime();\n  var seconds = Math.floor(millis / 1000);\n  var nanos = Number(seconds.toString().padEnd(9, \"0\"));\n  var buffer = Buffer.alloc(14); // buffer[0] = (1 << 3) | 1 // field 1, typ3 1\n\n  buffer.writeInt32LE(1 << 3 | 1, 0);\n  buffer.writeUInt32LE(seconds, 1); // buffer[9] = (2 << 3) | 5 // field 2, typ3 5\n\n  buffer.writeInt32LE(2 << 3 | 5, 9);\n  buffer.writeUInt32LE(nanos, 10);\n  return buffer;\n};\n/**\n * @category amino\n * @param obj -- {object}\n * @return bytes {Buffer}\n */\n\n\nexports.encodeTime = encodeTime;\n\nvar convertObjectToSignBytes = function convertObjectToSignBytes(obj) {\n  return Buffer.from(JSON.stringify(sortObject(obj)));\n};\n/**\n * js amino MarshalBinary\n * @category amino\n * @param {Object} obj\n *  */\n\n\nexports.convertObjectToSignBytes = convertObjectToSignBytes;\n\nvar marshalBinary = function marshalBinary(obj) {\n  if (!_is_js[\"default\"].object(obj)) throw new TypeError(\"data must be an object\");\n  return encodeBinary(obj, -1, true).toString(\"hex\");\n};\n/**\n * js amino MarshalBinaryBare\n * @category amino\n * @param {Object} obj\n *  */\n\n\nexports.marshalBinary = marshalBinary;\n\nvar marshalBinaryBare = function marshalBinaryBare(obj) {\n  if (!_is_js[\"default\"].object(obj)) throw new TypeError(\"data must be an object\");\n  return encodeBinary(obj).toString(\"hex\");\n};\n/**\n * This is the main entrypoint for encoding all types in binary form.\n * @category amino\n * @param {*} js data type (not null, not undefined)\n * @param {Number} field index of object\n * @param {Boolean} isByteLenPrefix\n * @return {Buffer} binary of object.\n */\n\n\nexports.marshalBinaryBare = marshalBinaryBare;\n\nvar encodeBinary = function encodeBinary(val, fieldNum, isByteLenPrefix) {\n  if (val === null || val === undefined) throw new TypeError(\"unsupported type\");\n\n  if (Buffer.isBuffer(val)) {\n    if (isByteLenPrefix) {\n      return Buffer.concat([_varint.UVarInt.encode(val.length), val]);\n    }\n\n    return val;\n  }\n\n  if (_is_js[\"default\"].array(val)) {\n    return encodeArrayBinary(fieldNum, val, isByteLenPrefix);\n  }\n\n  if (_is_js[\"default\"].number(val)) {\n    return encodeNumber(val);\n  }\n\n  if (_is_js[\"default\"][\"boolean\"](val)) {\n    return encodeBool(val);\n  }\n\n  if (_is_js[\"default\"].string(val)) {\n    return encodeString(val);\n  }\n\n  if (_is_js[\"default\"].object(val)) {\n    return encodeObjectBinary(val, isByteLenPrefix);\n  }\n\n  return;\n};\n/**\n * prefixed with bytes length\n * @category amino\n * @param {Buffer} bytes\n * @return {Buffer} with bytes length prefixed\n */\n\n\nexports.encodeBinary = encodeBinary;\n\nvar encodeBinaryByteArray = function encodeBinaryByteArray(bytes) {\n  var lenPrefix = bytes.length;\n  return Buffer.concat([_varint.UVarInt.encode(lenPrefix), bytes]);\n};\n/**\n * @category amino\n * @param {Object} obj\n * @return {Buffer} with bytes length prefixed\n */\n\n\nexports.encodeBinaryByteArray = encodeBinaryByteArray;\n\nvar encodeObjectBinary = function encodeObjectBinary(obj, isByteLenPrefix) {\n  var bufferArr = [];\n  Object.keys(obj).forEach(function (key, index) {\n    if (key === \"aminoPrefix\" || key === \"version\") return;\n    if (isDefaultValue(obj[key])) return;\n\n    if (_is_js[\"default\"].array(obj[key]) && obj[key].length > 0) {\n      bufferArr.push(encodeArrayBinary(index, obj[key]));\n    } else {\n      bufferArr.push(encodeTypeAndField(index, obj[key]));\n      bufferArr.push(encodeBinary(obj[key], index, true));\n    }\n  });\n  var bytes = Buffer.concat(bufferArr); // add prefix\n\n  if (obj.aminoPrefix) {\n    var prefix = Buffer.from(obj.aminoPrefix, \"hex\");\n    bytes = Buffer.concat([prefix, bytes]);\n  } // Write byte-length prefixed.\n\n\n  if (isByteLenPrefix) {\n    var lenBytes = _varint.UVarInt.encode(bytes.length);\n\n    bytes = Buffer.concat([lenBytes, bytes]);\n  }\n\n  return bytes;\n};\n/**\n * @category amino\n * @param {Number} fieldNum object field index\n * @param {Array} arr\n * @param {Boolean} isByteLenPrefix\n * @return {Buffer} bytes of array\n */\n\n\nexports.encodeObjectBinary = encodeObjectBinary;\n\nvar encodeArrayBinary = function encodeArrayBinary(fieldNum, arr, isByteLenPrefix) {\n  var result = [];\n  arr.forEach(function (item) {\n    result.push(encodeTypeAndField(fieldNum, item));\n\n    if (isDefaultValue(item)) {\n      result.push(Buffer.from(\"00\", \"hex\"));\n      return;\n    }\n\n    result.push(encodeBinary(item, fieldNum, true));\n  }); //encode length\n\n  if (isByteLenPrefix) {\n    var length = result.reduce(function (prev, item) {\n      return prev + item.length;\n    }, 0);\n    result.unshift(_varint.UVarInt.encode(length));\n  }\n\n  return Buffer.concat(result);\n}; // Write field key.\n\n\nexports.encodeArrayBinary = encodeArrayBinary;\n\nvar encodeTypeAndField = function encodeTypeAndField(index, field) {\n  index = Number(index);\n  var value = index + 1 << 3 | (0, _encoderHelper[\"default\"])(field);\n  return _varint.UVarInt.encode(value);\n};\n\nvar isDefaultValue = function isDefaultValue(obj) {\n  if (obj === null) return false;\n  return _is_js[\"default\"].number(obj) && obj === 0 || _is_js[\"default\"].string(obj) && obj === \"\" || _is_js[\"default\"].array(obj) && obj.length === 0 || _is_js[\"default\"][\"boolean\"](obj) && !obj;\n};"]},"metadata":{},"sourceType":"script"}