{"ast":null,"code":"// Copyright 2017-2021 @polkadot/api-derive authors & contributors\n// SPDX-License-Identifier: Apache-2.0\nimport { catchError, combineLatest, map, of, take } from 'rxjs';\nimport { assert, compactFromU8a } from '@polkadot/util'; // the order and types needs to map with the all array setup below\n\nconst NumberMap = ['Zero', 'One', 'Two', 'Three', 'Four', 'Five', 'Six', 'Seven', 'Eight', 'Nine', 'Ten'];\n\nfunction mapCapabilities({\n  accountIdLength,\n  refcount1Length,\n  refcount2Length,\n  refcount3Length\n}, [leasePeriodsPerSlot, slotRangeCount], [stakingVersion], [keys, accountInfo]) {\n  const types = {}; // AccountInfo\n\n  if (accountInfo) {\n    const length = accountInfo.length;\n\n    if (length === refcount1Length) {\n      types.AccountInfo = 'AccountInfoWithRefCount';\n    } else if (length === refcount2Length) {\n      types.AccountInfo = 'AccountInfoWithDualRefCount';\n    } else if (length === refcount3Length) {\n      types.AccountInfo = 'AccountInfoWithTripleRefCount';\n    }\n  } // ValidatorPrefs\n\n\n  if (stakingVersion) {\n    if (stakingVersion.index >= 4) {\n      // v1 = index 0, V5 = index 4\n      types.ValidatorPrefs = 'ValidatorPrefsWithBlocked';\n    } else {\n      types.ValidatorPrefs = 'ValidatorPrefsWithCommission';\n    }\n  } // Keys\n\n\n  if (keys) {\n    try {\n      const [offset, numItems] = compactFromU8a(keys);\n      const tupleLength = (keys.length - offset) / numItems.toNumber();\n      const numIds = tupleLength / accountIdLength;\n      const numIdsRound = Math.floor(numIds);\n      assert(numIds >= 2 && numIds <= 11, () => `Detected ${numIds} in Keys, should be >= 2 and <= 11`);\n\n      if (numIdsRound !== numIds) {\n        // Beefy?\n        if ((numIdsRound - 1) * accountIdLength + 33 === tupleLength) {\n          // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n          // @ts-ignore\n          types.Keys = `SessionKeys${numIdsRound - 1}B`;\n        } else {\n          assert(false, () => `Expected integer number of keys, found ${numIds.toFixed(2)}`);\n        }\n      } else {\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        types.Keys = `SessionKeys${numIds - 1}`;\n      }\n    } catch {// ignore\n    }\n  } // auctions\n\n\n  if (leasePeriodsPerSlot && slotRangeCount) {\n    const _enum = [];\n\n    for (let i = 0; leasePeriodsPerSlot.gtn(i); i++) {\n      for (let j = i; leasePeriodsPerSlot.gtn(j); j++) {\n        _enum.push(`${NumberMap[i]}${NumberMap[j]}`);\n      }\n    }\n\n    types.SlotRange = {\n      _enum\n    };\n    types.WinningData = `[WinningDataEntry; ${slotRangeCount.toNumber()}]`;\n  }\n\n  return types;\n}\n\nfunction filterEntries(original) {\n  const included = original.map(c => !!c);\n  return {\n    filtered: original.filter((_, index) => included[index]),\n    included,\n    original\n  };\n}\n\nfunction extractResults(results, map) {\n  let offset = -1;\n  return map.included.map(isIncluded => isIncluded ? results[++offset] : null);\n}\n/**\n * @description Query the chain for the specific capabilities\n */\n\n\nexport function detectedCapabilities(api, blockHash) {\n  var _api$consts$auctions, _api$consts$auctions2, _api$query$staking, _api$query$session, _api$query$system, _api$query$system$acc;\n\n  const emptyAccountId = api.registry.createType('AccountId');\n  const consts = filterEntries([(_api$consts$auctions = api.consts.auctions) === null || _api$consts$auctions === void 0 ? void 0 : _api$consts$auctions.leasePeriodsPerSlot, (_api$consts$auctions2 = api.consts.auctions) === null || _api$consts$auctions2 === void 0 ? void 0 : _api$consts$auctions2.slotRangeCount]);\n  const queries = filterEntries([(_api$query$staking = api.query.staking) === null || _api$query$staking === void 0 ? void 0 : _api$query$staking.storageVersion]);\n  const raws = filterEntries([(_api$query$session = api.query.session) === null || _api$query$session === void 0 ? void 0 : _api$query$session.queuedKeys.key(), (_api$query$system = api.query.system) === null || _api$query$system === void 0 ? void 0 : (_api$query$system$acc = _api$query$system.account) === null || _api$query$system$acc === void 0 ? void 0 : _api$query$system$acc.key(emptyAccountId)]);\n  return combineLatest([consts.filtered.length ? blockHash // FIXME consts don't have .at as of yet...\n  ? of([]) : of(consts.filtered) : of([]), queries.filtered.length ? blockHash ? combineLatest(queries.filtered.map(c => c.at(blockHash))) : api.queryMulti(queries.filtered) : of([]), raws.filtered.length ? blockHash ? combineLatest(raws.filtered.map(k => api.rpc.state.getStorage.raw(k, blockHash))) : combineLatest(raws.filtered.map(k => api.rpc.state.getStorage.raw(k))) : of([])]).pipe(map(([cResults, qResults, rResults]) => mapCapabilities({\n    accountIdLength: emptyAccountId.encodedLength,\n    refcount1Length: api.registry.createType('AccountInfoWithRefCount').encodedLength,\n    refcount2Length: api.registry.createType('AccountInfoWithDualRefCount').encodedLength,\n    refcount3Length: api.registry.createType('AccountInfoWithTripleRefCount').encodedLength\n  }, extractResults(cResults, consts), extractResults(qResults, queries), extractResults(rResults, raws))), take(1), catchError(() => of({})));\n}","map":{"version":3,"sources":["/home/abubakar/Desktop/KeyStore-Thorchain/node_modules/@polkadot/api/base/capabilities.js"],"names":["catchError","combineLatest","map","of","take","assert","compactFromU8a","NumberMap","mapCapabilities","accountIdLength","refcount1Length","refcount2Length","refcount3Length","leasePeriodsPerSlot","slotRangeCount","stakingVersion","keys","accountInfo","types","length","AccountInfo","index","ValidatorPrefs","offset","numItems","tupleLength","toNumber","numIds","numIdsRound","Math","floor","Keys","toFixed","_enum","i","gtn","j","push","SlotRange","WinningData","filterEntries","original","included","c","filtered","filter","_","extractResults","results","isIncluded","detectedCapabilities","api","blockHash","_api$consts$auctions","_api$consts$auctions2","_api$query$staking","_api$query$session","_api$query$system","_api$query$system$acc","emptyAccountId","registry","createType","consts","auctions","queries","query","staking","storageVersion","raws","session","queuedKeys","key","system","account","at","queryMulti","k","rpc","state","getStorage","raw","pipe","cResults","qResults","rResults","encodedLength"],"mappings":"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","sourcesContent":["// Copyright 2017-2021 @polkadot/api-derive authors & contributors\n// SPDX-License-Identifier: Apache-2.0\nimport { catchError, combineLatest, map, of, take } from 'rxjs';\nimport { assert, compactFromU8a } from '@polkadot/util'; // the order and types needs to map with the all array setup below\n\nconst NumberMap = ['Zero', 'One', 'Two', 'Three', 'Four', 'Five', 'Six', 'Seven', 'Eight', 'Nine', 'Ten'];\n\nfunction mapCapabilities({\n  accountIdLength,\n  refcount1Length,\n  refcount2Length,\n  refcount3Length\n}, [leasePeriodsPerSlot, slotRangeCount], [stakingVersion], [keys, accountInfo]) {\n  const types = {}; // AccountInfo\n\n  if (accountInfo) {\n    const length = accountInfo.length;\n\n    if (length === refcount1Length) {\n      types.AccountInfo = 'AccountInfoWithRefCount';\n    } else if (length === refcount2Length) {\n      types.AccountInfo = 'AccountInfoWithDualRefCount';\n    } else if (length === refcount3Length) {\n      types.AccountInfo = 'AccountInfoWithTripleRefCount';\n    }\n  } // ValidatorPrefs\n\n\n  if (stakingVersion) {\n    if (stakingVersion.index >= 4) {\n      // v1 = index 0, V5 = index 4\n      types.ValidatorPrefs = 'ValidatorPrefsWithBlocked';\n    } else {\n      types.ValidatorPrefs = 'ValidatorPrefsWithCommission';\n    }\n  } // Keys\n\n\n  if (keys) {\n    try {\n      const [offset, numItems] = compactFromU8a(keys);\n      const tupleLength = (keys.length - offset) / numItems.toNumber();\n      const numIds = tupleLength / accountIdLength;\n      const numIdsRound = Math.floor(numIds);\n      assert(numIds >= 2 && numIds <= 11, () => `Detected ${numIds} in Keys, should be >= 2 and <= 11`);\n\n      if (numIdsRound !== numIds) {\n        // Beefy?\n        if ((numIdsRound - 1) * accountIdLength + 33 === tupleLength) {\n          // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n          // @ts-ignore\n          types.Keys = `SessionKeys${numIdsRound - 1}B`;\n        } else {\n          assert(false, () => `Expected integer number of keys, found ${numIds.toFixed(2)}`);\n        }\n      } else {\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        types.Keys = `SessionKeys${numIds - 1}`;\n      }\n    } catch {// ignore\n    }\n  } // auctions\n\n\n  if (leasePeriodsPerSlot && slotRangeCount) {\n    const _enum = [];\n\n    for (let i = 0; leasePeriodsPerSlot.gtn(i); i++) {\n      for (let j = i; leasePeriodsPerSlot.gtn(j); j++) {\n        _enum.push(`${NumberMap[i]}${NumberMap[j]}`);\n      }\n    }\n\n    types.SlotRange = {\n      _enum\n    };\n    types.WinningData = `[WinningDataEntry; ${slotRangeCount.toNumber()}]`;\n  }\n\n  return types;\n}\n\nfunction filterEntries(original) {\n  const included = original.map(c => !!c);\n  return {\n    filtered: original.filter((_, index) => included[index]),\n    included,\n    original\n  };\n}\n\nfunction extractResults(results, map) {\n  let offset = -1;\n  return map.included.map(isIncluded => isIncluded ? results[++offset] : null);\n}\n/**\n * @description Query the chain for the specific capabilities\n */\n\n\nexport function detectedCapabilities(api, blockHash) {\n  var _api$consts$auctions, _api$consts$auctions2, _api$query$staking, _api$query$session, _api$query$system, _api$query$system$acc;\n\n  const emptyAccountId = api.registry.createType('AccountId');\n  const consts = filterEntries([(_api$consts$auctions = api.consts.auctions) === null || _api$consts$auctions === void 0 ? void 0 : _api$consts$auctions.leasePeriodsPerSlot, (_api$consts$auctions2 = api.consts.auctions) === null || _api$consts$auctions2 === void 0 ? void 0 : _api$consts$auctions2.slotRangeCount]);\n  const queries = filterEntries([(_api$query$staking = api.query.staking) === null || _api$query$staking === void 0 ? void 0 : _api$query$staking.storageVersion]);\n  const raws = filterEntries([(_api$query$session = api.query.session) === null || _api$query$session === void 0 ? void 0 : _api$query$session.queuedKeys.key(), (_api$query$system = api.query.system) === null || _api$query$system === void 0 ? void 0 : (_api$query$system$acc = _api$query$system.account) === null || _api$query$system$acc === void 0 ? void 0 : _api$query$system$acc.key(emptyAccountId)]);\n  return combineLatest([consts.filtered.length ? blockHash // FIXME consts don't have .at as of yet...\n  ? of([]) : of(consts.filtered) : of([]), queries.filtered.length ? blockHash ? combineLatest(queries.filtered.map(c => c.at(blockHash))) : api.queryMulti(queries.filtered) : of([]), raws.filtered.length ? blockHash ? combineLatest(raws.filtered.map(k => api.rpc.state.getStorage.raw(k, blockHash))) : combineLatest(raws.filtered.map(k => api.rpc.state.getStorage.raw(k))) : of([])]).pipe(map(([cResults, qResults, rResults]) => mapCapabilities({\n    accountIdLength: emptyAccountId.encodedLength,\n    refcount1Length: api.registry.createType('AccountInfoWithRefCount').encodedLength,\n    refcount2Length: api.registry.createType('AccountInfoWithDualRefCount').encodedLength,\n    refcount3Length: api.registry.createType('AccountInfoWithTripleRefCount').encodedLength\n  }, extractResults(cResults, consts), extractResults(qResults, queries), extractResults(rResults, raws))), take(1), catchError(() => of({})));\n}"]},"metadata":{},"sourceType":"module"}