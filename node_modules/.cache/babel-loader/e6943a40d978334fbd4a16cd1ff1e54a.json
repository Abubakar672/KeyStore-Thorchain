{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.decodeFieldNumberAndTyp3 = exports.unMarshalBinaryBare = exports.unMarshalBinaryLengthPrefixed = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _is_js = _interopRequireDefault(require(\"is_js\"));\n\nvar _protocolBuffersEncodings = require(\"protocol-buffers-encodings\");\n\nvar _encoderHelper = _interopRequireDefault(require(\"../../utils/encoderHelper\"));\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        (0, _defineProperty2[\"default\"])(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nvar decoder = function decoder(bytes, varType) {\n  var val = varType.decode(bytes, 0);\n  var offset = varType.encodingLength(val);\n  return {\n    val: val,\n    offset: offset\n  };\n};\n/**\n * @category amino\n * js amino UnmarshalBinaryLengthPrefixed\n * @param {Buffer} bytes\n * @param {Object} type\n * @returns {Object}\n *  */\n\n\nvar unMarshalBinaryLengthPrefixed = function unMarshalBinaryLengthPrefixed(bytes, type) {\n  if (bytes.length === 0) throw new TypeError(\"Cannot decode empty bytes\"); // read byte-length prefix\n\n  var _decoder = decoder(bytes, _protocolBuffersEncodings.varint),\n      len = _decoder.offset;\n\n  if (len < 0) throw new Error(\"Error reading msg byte-length prefix: got code \".concat(len));\n  bytes = bytes.slice(len);\n  return unMarshalBinaryBare(bytes, type);\n};\n/**\n * @category amino\n * js amino UnmarshalBinaryBare\n * @param {Buffer} bytes\n * @param {Object} type\n * @returns {Object}\n *  */\n\n\nexports.unMarshalBinaryLengthPrefixed = unMarshalBinaryLengthPrefixed;\n\nvar unMarshalBinaryBare = function unMarshalBinaryBare(bytes, type) {\n  if (!_is_js[\"default\"].object(type)) throw new TypeError(\"type should be object\");\n  if (!Buffer.isBuffer(bytes)) throw new TypeError(\"bytes must be buffer\");\n\n  if (_is_js[\"default\"].array(type)) {\n    if (!_is_js[\"default\"].object(type[0])) throw new TypeError(\"type should be object\");\n    return decodeArrayBinary(bytes, type[0]);\n  }\n\n  return decodeBinary(bytes, type);\n};\n\nexports.unMarshalBinaryBare = unMarshalBinaryBare;\n\nvar decodeBinary = function decodeBinary(bytes, type, isLengthPrefixed) {\n  if (Buffer.isBuffer(type)) {\n    return decoder(bytes, _protocolBuffersEncodings.bytes);\n  }\n\n  if (_is_js[\"default\"].array(type)) {\n    return decodeArrayBinary(bytes, type);\n  }\n\n  if (_is_js[\"default\"].number(type)) {\n    return decoder(bytes, _protocolBuffersEncodings.varint);\n  }\n\n  if (_is_js[\"default\"][\"boolean\"](type)) {\n    return decoder(bytes, _protocolBuffersEncodings.bool);\n  }\n\n  if (_is_js[\"default\"].string(type)) {\n    return decoder(bytes, _protocolBuffersEncodings.string);\n  }\n\n  if (_is_js[\"default\"].object(type)) {\n    return decodeObjectBinary(bytes, type, isLengthPrefixed);\n  }\n\n  return;\n};\n\nvar setDefaultValue = function setDefaultValue(type, key) {\n  if (_is_js[\"default\"].object(type[key])) type[key] = null;\n  if (_is_js[\"default\"].number(type[key])) type[key] = 0;\n  if (_is_js[\"default\"][\"boolean\"](type[key])) type[key] = false;\n  if (_is_js[\"default\"].string(type[key])) type[key] = \"\";\n};\n\nvar decodeObjectBinary = function decodeObjectBinary(bytes, type, isLengthPrefixed) {\n  var objectOffset = 0; // read byte-length prefix\n\n  if (isLengthPrefixed) {\n    var _decoder2 = decoder(bytes, _protocolBuffersEncodings.varint),\n        len = _decoder2.offset;\n\n    bytes = bytes.slice(len);\n    objectOffset += len;\n  } // If registered concrete, consume and verify prefix bytes.\n\n\n  if (type.aminoPrefix) {\n    bytes = bytes.slice(4);\n    objectOffset += 4;\n  }\n\n  var lastFieldNum = 0;\n  var keys = Object.keys(type).filter(function (key) {\n    return key !== \"aminoPrefix\";\n  });\n  keys.forEach(function (key, index) {\n    if (_is_js[\"default\"].array(type[key])) {\n      var _decodeArrayBinary = decodeArrayBinary(bytes, type[key][0]),\n          offset = _decodeArrayBinary.offset,\n          val = _decodeArrayBinary.val;\n\n      objectOffset += offset;\n      type[key] = val;\n      bytes = bytes.slice(offset);\n    } else {\n      var _decodeFieldNumberAnd = decodeFieldNumberAndTyp3(bytes),\n          fieldNum = _decodeFieldNumberAnd.fieldNum,\n          typ = _decodeFieldNumberAnd.typ; //if this field is default value, continue\n\n\n      if (index + 1 !== fieldNum || fieldNum < 0) {\n        setDefaultValue(type, key);\n        return;\n      }\n\n      if (fieldNum <= lastFieldNum) {\n        throw new Error(\"encountered fieldNum: \".concat(fieldNum, \", but we have already seen fnum: \").concat(lastFieldNum));\n      }\n\n      lastFieldNum = fieldNum;\n\n      if (index + 1 !== fieldNum) {\n        throw new Error(\"field number is not expected\");\n      }\n\n      var typeWanted = (0, _encoderHelper[\"default\"])(type[key]);\n\n      if (typ !== typeWanted) {\n        throw new Error(\"field type is not expected\");\n      } //remove 1 byte of type\n\n\n      bytes = bytes.slice(1);\n\n      var _decodeBinary = decodeBinary(bytes, type[key], true),\n          _val = _decodeBinary.val,\n          _offset = _decodeBinary.offset;\n\n      type[key] = _val; //remove decoded bytes\n\n      bytes = bytes.slice(_offset);\n      objectOffset += _offset + 1;\n    }\n  });\n  return {\n    val: type,\n    offset: objectOffset\n  };\n};\n\nvar decodeArrayBinary = function decodeArrayBinary(bytes, type) {\n  var arr = [];\n  var arrayOffset = 0;\n\n  var _decodeFieldNumberAnd2 = decodeFieldNumberAndTyp3(bytes),\n      fieldNumber = _decodeFieldNumberAnd2.fieldNum;\n\n  while (true) {\n    var _decodeFieldNumberAnd3 = decodeFieldNumberAndTyp3(bytes),\n        fieldNum = _decodeFieldNumberAnd3.fieldNum;\n\n    if (fieldNum !== fieldNumber || fieldNum < 0) break; //remove 1 byte of encoded field number and type\n\n    bytes = bytes.slice(1); //is default value, skip and continue read bytes\n    // if (bytes.length > 0 && bytes[0] === 0x00) continue\n\n    if (bytes.length > 0 && bytes.readUInt8(0) === 0x00) continue;\n\n    var _decodeBinary2 = decodeBinary(bytes, type, true),\n        offset = _decodeBinary2.offset,\n        val = _decodeBinary2.val;\n\n    arr.push(_objectSpread({}, val));\n    bytes = bytes.slice(offset + 1); //add 1 byte of type\n\n    arrayOffset += offset + 1;\n    fieldNumber = fieldNum;\n  } // console.log(arr)\n\n\n  return {\n    val: arr,\n    offset: arrayOffset\n  };\n};\n\nvar decodeFieldNumberAndTyp3 = function decodeFieldNumberAndTyp3(bytes) {\n  if (bytes.length < 2) {\n    //default value\n    return {\n      fieldNum: -1\n    };\n  }\n\n  var _decoder3 = decoder(bytes, _protocolBuffersEncodings.varint),\n      val = _decoder3.val;\n\n  var typ = val & 7;\n  var fieldNum = val >> 3;\n\n  if (fieldNum > 1 << 29 - 1) {\n    throw new Error(\"invalid field num \".concat(fieldNum));\n  }\n\n  return {\n    fieldNum: fieldNum,\n    typ: typ\n  };\n};\n\nexports.decodeFieldNumberAndTyp3 = decodeFieldNumberAndTyp3;","map":{"version":3,"sources":["/home/abubakar/Desktop/KeyStore-Thorchain/node_modules/@binance-chain/javascript-sdk/lib/amino/decoder/index.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","decodeFieldNumberAndTyp3","unMarshalBinaryBare","unMarshalBinaryLengthPrefixed","_defineProperty2","_is_js","_protocolBuffersEncodings","_encoderHelper","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","decoder","bytes","varType","val","decode","offset","encodingLength","type","TypeError","_decoder","varint","len","Error","concat","slice","Buffer","isBuffer","array","decodeArrayBinary","decodeBinary","isLengthPrefixed","number","bool","string","decodeObjectBinary","setDefaultValue","objectOffset","_decoder2","aminoPrefix","lastFieldNum","index","_decodeArrayBinary","_decodeFieldNumberAnd","fieldNum","typ","typeWanted","_decodeBinary","_val","_offset","arr","arrayOffset","_decodeFieldNumberAnd2","fieldNumber","_decodeFieldNumberAnd3","readUInt8","_decodeBinary2","_decoder3"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.decodeFieldNumberAndTyp3 = exports.unMarshalBinaryBare = exports.unMarshalBinaryLengthPrefixed = void 0;\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _is_js = _interopRequireDefault(require(\"is_js\"));\n\nvar _protocolBuffersEncodings = require(\"protocol-buffers-encodings\");\n\nvar _encoderHelper = _interopRequireDefault(require(\"../../utils/encoderHelper\"));\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2[\"default\"])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar decoder = function decoder(bytes, varType) {\n  var val = varType.decode(bytes, 0);\n  var offset = varType.encodingLength(val);\n  return {\n    val: val,\n    offset: offset\n  };\n};\n/**\n * @category amino\n * js amino UnmarshalBinaryLengthPrefixed\n * @param {Buffer} bytes\n * @param {Object} type\n * @returns {Object}\n *  */\n\n\nvar unMarshalBinaryLengthPrefixed = function unMarshalBinaryLengthPrefixed(bytes, type) {\n  if (bytes.length === 0) throw new TypeError(\"Cannot decode empty bytes\"); // read byte-length prefix\n\n  var _decoder = decoder(bytes, _protocolBuffersEncodings.varint),\n      len = _decoder.offset;\n\n  if (len < 0) throw new Error(\"Error reading msg byte-length prefix: got code \".concat(len));\n  bytes = bytes.slice(len);\n  return unMarshalBinaryBare(bytes, type);\n};\n/**\n * @category amino\n * js amino UnmarshalBinaryBare\n * @param {Buffer} bytes\n * @param {Object} type\n * @returns {Object}\n *  */\n\n\nexports.unMarshalBinaryLengthPrefixed = unMarshalBinaryLengthPrefixed;\n\nvar unMarshalBinaryBare = function unMarshalBinaryBare(bytes, type) {\n  if (!_is_js[\"default\"].object(type)) throw new TypeError(\"type should be object\");\n  if (!Buffer.isBuffer(bytes)) throw new TypeError(\"bytes must be buffer\");\n\n  if (_is_js[\"default\"].array(type)) {\n    if (!_is_js[\"default\"].object(type[0])) throw new TypeError(\"type should be object\");\n    return decodeArrayBinary(bytes, type[0]);\n  }\n\n  return decodeBinary(bytes, type);\n};\n\nexports.unMarshalBinaryBare = unMarshalBinaryBare;\n\nvar decodeBinary = function decodeBinary(bytes, type, isLengthPrefixed) {\n  if (Buffer.isBuffer(type)) {\n    return decoder(bytes, _protocolBuffersEncodings.bytes);\n  }\n\n  if (_is_js[\"default\"].array(type)) {\n    return decodeArrayBinary(bytes, type);\n  }\n\n  if (_is_js[\"default\"].number(type)) {\n    return decoder(bytes, _protocolBuffersEncodings.varint);\n  }\n\n  if (_is_js[\"default\"][\"boolean\"](type)) {\n    return decoder(bytes, _protocolBuffersEncodings.bool);\n  }\n\n  if (_is_js[\"default\"].string(type)) {\n    return decoder(bytes, _protocolBuffersEncodings.string);\n  }\n\n  if (_is_js[\"default\"].object(type)) {\n    return decodeObjectBinary(bytes, type, isLengthPrefixed);\n  }\n\n  return;\n};\n\nvar setDefaultValue = function setDefaultValue(type, key) {\n  if (_is_js[\"default\"].object(type[key])) type[key] = null;\n  if (_is_js[\"default\"].number(type[key])) type[key] = 0;\n  if (_is_js[\"default\"][\"boolean\"](type[key])) type[key] = false;\n  if (_is_js[\"default\"].string(type[key])) type[key] = \"\";\n};\n\nvar decodeObjectBinary = function decodeObjectBinary(bytes, type, isLengthPrefixed) {\n  var objectOffset = 0; // read byte-length prefix\n\n  if (isLengthPrefixed) {\n    var _decoder2 = decoder(bytes, _protocolBuffersEncodings.varint),\n        len = _decoder2.offset;\n\n    bytes = bytes.slice(len);\n    objectOffset += len;\n  } // If registered concrete, consume and verify prefix bytes.\n\n\n  if (type.aminoPrefix) {\n    bytes = bytes.slice(4);\n    objectOffset += 4;\n  }\n\n  var lastFieldNum = 0;\n  var keys = Object.keys(type).filter(function (key) {\n    return key !== \"aminoPrefix\";\n  });\n  keys.forEach(function (key, index) {\n    if (_is_js[\"default\"].array(type[key])) {\n      var _decodeArrayBinary = decodeArrayBinary(bytes, type[key][0]),\n          offset = _decodeArrayBinary.offset,\n          val = _decodeArrayBinary.val;\n\n      objectOffset += offset;\n      type[key] = val;\n      bytes = bytes.slice(offset);\n    } else {\n      var _decodeFieldNumberAnd = decodeFieldNumberAndTyp3(bytes),\n          fieldNum = _decodeFieldNumberAnd.fieldNum,\n          typ = _decodeFieldNumberAnd.typ; //if this field is default value, continue\n\n\n      if (index + 1 !== fieldNum || fieldNum < 0) {\n        setDefaultValue(type, key);\n        return;\n      }\n\n      if (fieldNum <= lastFieldNum) {\n        throw new Error(\"encountered fieldNum: \".concat(fieldNum, \", but we have already seen fnum: \").concat(lastFieldNum));\n      }\n\n      lastFieldNum = fieldNum;\n\n      if (index + 1 !== fieldNum) {\n        throw new Error(\"field number is not expected\");\n      }\n\n      var typeWanted = (0, _encoderHelper[\"default\"])(type[key]);\n\n      if (typ !== typeWanted) {\n        throw new Error(\"field type is not expected\");\n      } //remove 1 byte of type\n\n\n      bytes = bytes.slice(1);\n\n      var _decodeBinary = decodeBinary(bytes, type[key], true),\n          _val = _decodeBinary.val,\n          _offset = _decodeBinary.offset;\n\n      type[key] = _val; //remove decoded bytes\n\n      bytes = bytes.slice(_offset);\n      objectOffset += _offset + 1;\n    }\n  });\n  return {\n    val: type,\n    offset: objectOffset\n  };\n};\n\nvar decodeArrayBinary = function decodeArrayBinary(bytes, type) {\n  var arr = [];\n  var arrayOffset = 0;\n\n  var _decodeFieldNumberAnd2 = decodeFieldNumberAndTyp3(bytes),\n      fieldNumber = _decodeFieldNumberAnd2.fieldNum;\n\n  while (true) {\n    var _decodeFieldNumberAnd3 = decodeFieldNumberAndTyp3(bytes),\n        fieldNum = _decodeFieldNumberAnd3.fieldNum;\n\n    if (fieldNum !== fieldNumber || fieldNum < 0) break; //remove 1 byte of encoded field number and type\n\n    bytes = bytes.slice(1); //is default value, skip and continue read bytes\n    // if (bytes.length > 0 && bytes[0] === 0x00) continue\n\n    if (bytes.length > 0 && bytes.readUInt8(0) === 0x00) continue;\n\n    var _decodeBinary2 = decodeBinary(bytes, type, true),\n        offset = _decodeBinary2.offset,\n        val = _decodeBinary2.val;\n\n    arr.push(_objectSpread({}, val));\n    bytes = bytes.slice(offset + 1); //add 1 byte of type\n\n    arrayOffset += offset + 1;\n    fieldNumber = fieldNum;\n  } // console.log(arr)\n\n\n  return {\n    val: arr,\n    offset: arrayOffset\n  };\n};\n\nvar decodeFieldNumberAndTyp3 = function decodeFieldNumberAndTyp3(bytes) {\n  if (bytes.length < 2) {\n    //default value\n    return {\n      fieldNum: -1\n    };\n  }\n\n  var _decoder3 = decoder(bytes, _protocolBuffersEncodings.varint),\n      val = _decoder3.val;\n\n  var typ = val & 7;\n  var fieldNum = val >> 3;\n\n  if (fieldNum > 1 << 29 - 1) {\n    throw new Error(\"invalid field num \".concat(fieldNum));\n  }\n\n  return {\n    fieldNum: fieldNum,\n    typ: typ\n  };\n};\n\nexports.decodeFieldNumberAndTyp3 = decodeFieldNumberAndTyp3;"]},"metadata":{},"sourceType":"script"}