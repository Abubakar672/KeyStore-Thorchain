{"ast":null,"code":"import _classPrivateFieldLooseBase from \"@babel/runtime/helpers/esm/classPrivateFieldLooseBase\";\nimport _classPrivateFieldLooseKey from \"@babel/runtime/helpers/esm/classPrivateFieldLooseKey\"; // Copyright 2017-2021 @polkadot/util-crypto authors & contributors\n// SPDX-License-Identifier: Apache-2.0\n\nimport { bnToHex, compactAddLength, hexToU8a, isBigInt, isBn, isHex, isNumber, isString, stringToU8a } from '@polkadot/util';\nimport { blake2AsU8a } from \"../blake2/asU8a.js\";\nconst RE_NUMBER = /^\\d+$/;\nconst JUNCTION_ID_LEN = 32;\nconst BN_OPTIONS = {\n  bitLength: 256,\n  isLe: true\n};\n\nvar _chainCode = /*#__PURE__*/_classPrivateFieldLooseKey(\"chainCode\");\n\nvar _isHard = /*#__PURE__*/_classPrivateFieldLooseKey(\"isHard\");\n\nexport class DeriveJunction {\n  constructor() {\n    Object.defineProperty(this, _chainCode, {\n      writable: true,\n      value: new Uint8Array(32)\n    });\n    Object.defineProperty(this, _isHard, {\n      writable: true,\n      value: false\n    });\n  }\n\n  static from(value) {\n    const result = new DeriveJunction();\n    const [code, isHard] = value.startsWith('/') ? [value.substr(1), true] : [value, false];\n    result.soft(RE_NUMBER.test(code) ? parseInt(code, 10) : code);\n    return isHard ? result.harden() : result;\n  }\n\n  get chainCode() {\n    return _classPrivateFieldLooseBase(this, _chainCode)[_chainCode];\n  }\n\n  get isHard() {\n    return _classPrivateFieldLooseBase(this, _isHard)[_isHard];\n  }\n\n  get isSoft() {\n    return !_classPrivateFieldLooseBase(this, _isHard)[_isHard];\n  }\n\n  hard(value) {\n    return this.soft(value).harden();\n  }\n\n  harden() {\n    _classPrivateFieldLooseBase(this, _isHard)[_isHard] = true;\n    return this;\n  }\n\n  soft(value) {\n    if (isNumber(value) || isBn(value) || isBigInt(value)) {\n      return this.soft(bnToHex(value, BN_OPTIONS));\n    } else if (isHex(value)) {\n      return this.soft(hexToU8a(value));\n    } else if (isString(value)) {\n      return this.soft(compactAddLength(stringToU8a(value)));\n    } else if (value.length > JUNCTION_ID_LEN) {\n      return this.soft(blake2AsU8a(value));\n    }\n\n    _classPrivateFieldLooseBase(this, _chainCode)[_chainCode].fill(0);\n\n    _classPrivateFieldLooseBase(this, _chainCode)[_chainCode].set(value, 0);\n\n    return this;\n  }\n\n  soften() {\n    _classPrivateFieldLooseBase(this, _isHard)[_isHard] = false;\n    return this;\n  }\n\n}","map":{"version":3,"sources":["/home/abubakar/Desktop/KeyStore-Thorchain/node_modules/@polkadot/util-crypto/key/DeriveJunction.js"],"names":["_classPrivateFieldLooseBase","_classPrivateFieldLooseKey","bnToHex","compactAddLength","hexToU8a","isBigInt","isBn","isHex","isNumber","isString","stringToU8a","blake2AsU8a","RE_NUMBER","JUNCTION_ID_LEN","BN_OPTIONS","bitLength","isLe","_chainCode","_isHard","DeriveJunction","constructor","Object","defineProperty","writable","value","Uint8Array","from","result","code","isHard","startsWith","substr","soft","test","parseInt","harden","chainCode","isSoft","hard","length","fill","set","soften"],"mappings":"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","sourcesContent":["import _classPrivateFieldLooseBase from \"@babel/runtime/helpers/esm/classPrivateFieldLooseBase\";\nimport _classPrivateFieldLooseKey from \"@babel/runtime/helpers/esm/classPrivateFieldLooseKey\";\n// Copyright 2017-2021 @polkadot/util-crypto authors & contributors\n// SPDX-License-Identifier: Apache-2.0\nimport { bnToHex, compactAddLength, hexToU8a, isBigInt, isBn, isHex, isNumber, isString, stringToU8a } from '@polkadot/util';\nimport { blake2AsU8a } from \"../blake2/asU8a.js\";\nconst RE_NUMBER = /^\\d+$/;\nconst JUNCTION_ID_LEN = 32;\nconst BN_OPTIONS = {\n  bitLength: 256,\n  isLe: true\n};\n\nvar _chainCode = /*#__PURE__*/_classPrivateFieldLooseKey(\"chainCode\");\n\nvar _isHard = /*#__PURE__*/_classPrivateFieldLooseKey(\"isHard\");\n\nexport class DeriveJunction {\n  constructor() {\n    Object.defineProperty(this, _chainCode, {\n      writable: true,\n      value: new Uint8Array(32)\n    });\n    Object.defineProperty(this, _isHard, {\n      writable: true,\n      value: false\n    });\n  }\n\n  static from(value) {\n    const result = new DeriveJunction();\n    const [code, isHard] = value.startsWith('/') ? [value.substr(1), true] : [value, false];\n    result.soft(RE_NUMBER.test(code) ? parseInt(code, 10) : code);\n    return isHard ? result.harden() : result;\n  }\n\n  get chainCode() {\n    return _classPrivateFieldLooseBase(this, _chainCode)[_chainCode];\n  }\n\n  get isHard() {\n    return _classPrivateFieldLooseBase(this, _isHard)[_isHard];\n  }\n\n  get isSoft() {\n    return !_classPrivateFieldLooseBase(this, _isHard)[_isHard];\n  }\n\n  hard(value) {\n    return this.soft(value).harden();\n  }\n\n  harden() {\n    _classPrivateFieldLooseBase(this, _isHard)[_isHard] = true;\n    return this;\n  }\n\n  soft(value) {\n    if (isNumber(value) || isBn(value) || isBigInt(value)) {\n      return this.soft(bnToHex(value, BN_OPTIONS));\n    } else if (isHex(value)) {\n      return this.soft(hexToU8a(value));\n    } else if (isString(value)) {\n      return this.soft(compactAddLength(stringToU8a(value)));\n    } else if (value.length > JUNCTION_ID_LEN) {\n      return this.soft(blake2AsU8a(value));\n    }\n\n    _classPrivateFieldLooseBase(this, _chainCode)[_chainCode].fill(0);\n\n    _classPrivateFieldLooseBase(this, _chainCode)[_chainCode].set(value, 0);\n\n    return this;\n  }\n\n  soften() {\n    _classPrivateFieldLooseBase(this, _isHard)[_isHard] = false;\n    return this;\n  }\n\n}"]},"metadata":{},"sourceType":"module"}