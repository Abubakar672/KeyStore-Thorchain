{"ast":null,"code":"// Copyright 2017-2021 @polkadot/api-derive authors & contributors\n// SPDX-License-Identifier: Apache-2.0\nimport { combineLatest, map } from 'rxjs';\nimport { memo } from \"../util/index.js\";\n/**\n * @name bestNumberLag\n * @returns A number of blocks\n * @description Calculates the lag between finalized head and best head\n * @example\n * <BR>\n *\n * ```javascript\n * api.derive.chain.bestNumberLag((lag) => {\n *   console.log(`finalized is ${lag} blocks behind head`);\n * });\n * ```\n */\n\nexport function bestNumberLag(instanceId, api) {\n  return memo(instanceId, () => combineLatest([api.derive.chain.bestNumber(), api.derive.chain.bestNumberFinalized()]).pipe(map(([bestNumber, bestNumberFinalized]) => api.registry.createType('BlockNumber', bestNumber.sub(bestNumberFinalized)))));\n}","map":{"version":3,"sources":["/home/abubakar/Desktop/KeyStore-Thorchain/node_modules/@polkadot/api-derive/chain/bestNumberLag.js"],"names":["combineLatest","map","memo","bestNumberLag","instanceId","api","derive","chain","bestNumber","bestNumberFinalized","pipe","registry","createType","sub"],"mappings":"AAAA;AACA;AACA,SAASA,aAAT,EAAwBC,GAAxB,QAAmC,MAAnC;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO,SAASC,aAAT,CAAuBC,UAAvB,EAAmCC,GAAnC,EAAwC;AAC7C,SAAOH,IAAI,CAACE,UAAD,EAAa,MAAMJ,aAAa,CAAC,CAACK,GAAG,CAACC,MAAJ,CAAWC,KAAX,CAAiBC,UAAjB,EAAD,EAAgCH,GAAG,CAACC,MAAJ,CAAWC,KAAX,CAAiBE,mBAAjB,EAAhC,CAAD,CAAb,CAAuFC,IAAvF,CAA4FT,GAAG,CAAC,CAAC,CAACO,UAAD,EAAaC,mBAAb,CAAD,KAAuCJ,GAAG,CAACM,QAAJ,CAAaC,UAAb,CAAwB,aAAxB,EAAuCJ,UAAU,CAACK,GAAX,CAAeJ,mBAAf,CAAvC,CAAxC,CAA/F,CAAnB,CAAX;AACD","sourcesContent":["// Copyright 2017-2021 @polkadot/api-derive authors & contributors\n// SPDX-License-Identifier: Apache-2.0\nimport { combineLatest, map } from 'rxjs';\nimport { memo } from \"../util/index.js\";\n/**\n * @name bestNumberLag\n * @returns A number of blocks\n * @description Calculates the lag between finalized head and best head\n * @example\n * <BR>\n *\n * ```javascript\n * api.derive.chain.bestNumberLag((lag) => {\n *   console.log(`finalized is ${lag} blocks behind head`);\n * });\n * ```\n */\n\nexport function bestNumberLag(instanceId, api) {\n  return memo(instanceId, () => combineLatest([api.derive.chain.bestNumber(), api.derive.chain.bestNumberFinalized()]).pipe(map(([bestNumber, bestNumberFinalized]) => api.registry.createType('BlockNumber', bestNumber.sub(bestNumberFinalized)))));\n}"]},"metadata":{},"sourceType":"module"}