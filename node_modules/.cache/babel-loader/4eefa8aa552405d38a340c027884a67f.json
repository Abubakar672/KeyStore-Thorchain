{"ast":null,"code":"import { Subject } from '../Subject';\nimport { operate } from '../util/lift';\nimport { OperatorSubscriber } from './OperatorSubscriber';\nimport { innerFrom } from '../observable/from';\nexport function windowWhen(closingSelector) {\n  return operate(function (source, subscriber) {\n    var window;\n    var closingSubscriber;\n\n    var handleError = function (err) {\n      window.error(err);\n      subscriber.error(err);\n    };\n\n    var openWindow = function () {\n      closingSubscriber === null || closingSubscriber === void 0 ? void 0 : closingSubscriber.unsubscribe();\n      window === null || window === void 0 ? void 0 : window.complete();\n      window = new Subject();\n      subscriber.next(window.asObservable());\n      var closingNotifier;\n\n      try {\n        closingNotifier = innerFrom(closingSelector());\n      } catch (err) {\n        handleError(err);\n        return;\n      }\n\n      closingNotifier.subscribe(closingSubscriber = new OperatorSubscriber(subscriber, openWindow, openWindow, handleError));\n    };\n\n    openWindow();\n    source.subscribe(new OperatorSubscriber(subscriber, function (value) {\n      return window.next(value);\n    }, function () {\n      window.complete();\n      subscriber.complete();\n    }, handleError, function () {\n      closingSubscriber === null || closingSubscriber === void 0 ? void 0 : closingSubscriber.unsubscribe();\n      window = null;\n    }));\n  });\n}","map":{"version":3,"sources":["../../../../src/internal/operators/windowWhen.ts"],"names":[],"mappings":"AAEA,SAAS,OAAT,QAAwB,YAAxB;AAEA,SAAS,OAAT,QAAwB,cAAxB;AACA,SAAS,kBAAT,QAAmC,sBAAnC;AACA,SAAS,SAAT,QAA0B,oBAA1B;AA6CA,OAAM,SAAU,UAAV,CAAwB,eAAxB,EAAmE;AACvE,SAAO,OAAO,CAAC,UAAC,MAAD,EAAS,UAAT,EAAmB;AAChC,QAAI,MAAJ;AACA,QAAI,iBAAJ;;AAMA,QAAM,WAAW,GAAG,UAAC,GAAD,EAAS;AAC3B,MAAA,MAAO,CAAC,KAAR,CAAc,GAAd;AACA,MAAA,UAAU,CAAC,KAAX,CAAiB,GAAjB;AACD,KAHD;;AAWA,QAAM,UAAU,GAAG,YAAA;AAGjB,MAAA,iBAAiB,KAAA,IAAjB,IAAA,iBAAiB,KAAA,KAAA,CAAjB,GAAiB,KAAA,CAAjB,GAAA,iBAAiB,CAAE,WAAnB,EAAA;AAGA,MAAA,MAAM,KAAA,IAAN,IAAA,MAAM,KAAA,KAAA,CAAN,GAAM,KAAA,CAAN,GAAA,MAAM,CAAE,QAAR,EAAA;AAGA,MAAA,MAAM,GAAG,IAAI,OAAJ,EAAT;AACA,MAAA,UAAU,CAAC,IAAX,CAAgB,MAAM,CAAC,YAAP,EAAhB;AAGA,UAAI,eAAJ;;AACA,UAAI;AACF,QAAA,eAAe,GAAG,SAAS,CAAC,eAAe,EAAhB,CAA3B;AACD,OAFD,CAEE,OAAO,GAAP,EAAY;AACZ,QAAA,WAAW,CAAC,GAAD,CAAX;AACA;AACD;;AAMD,MAAA,eAAe,CAAC,SAAhB,CAA2B,iBAAiB,GAAG,IAAI,kBAAJ,CAAuB,UAAvB,EAAmC,UAAnC,EAA+C,UAA/C,EAA2D,WAA3D,CAA/C;AACD,KA1BD;;AA6BA,IAAA,UAAU;AAGV,IAAA,MAAM,CAAC,SAAP,CACE,IAAI,kBAAJ,CACE,UADF,EAEE,UAAC,KAAD,EAAM;AAAK,aAAA,MAAO,CAAC,IAAR,CAAA,KAAA,CAAA;AAAmB,KAFhC,EAGE,YAAA;AAEE,MAAA,MAAO,CAAC,QAAR;AACA,MAAA,UAAU,CAAC,QAAX;AACD,KAPH,EAQE,WARF,EASE,YAAA;AAGE,MAAA,iBAAiB,KAAA,IAAjB,IAAA,iBAAiB,KAAA,KAAA,CAAjB,GAAiB,KAAA,CAAjB,GAAA,iBAAiB,CAAE,WAAnB,EAAA;AACA,MAAA,MAAM,GAAG,IAAT;AACD,KAdH,CADF;AAkBD,GArEa,CAAd;AAsED","sourceRoot":"","sourcesContent":["import { Subject } from '../Subject';\nimport { operate } from '../util/lift';\nimport { OperatorSubscriber } from './OperatorSubscriber';\nimport { innerFrom } from '../observable/from';\nexport function windowWhen(closingSelector) {\n    return operate(function (source, subscriber) {\n        var window;\n        var closingSubscriber;\n        var handleError = function (err) {\n            window.error(err);\n            subscriber.error(err);\n        };\n        var openWindow = function () {\n            closingSubscriber === null || closingSubscriber === void 0 ? void 0 : closingSubscriber.unsubscribe();\n            window === null || window === void 0 ? void 0 : window.complete();\n            window = new Subject();\n            subscriber.next(window.asObservable());\n            var closingNotifier;\n            try {\n                closingNotifier = innerFrom(closingSelector());\n            }\n            catch (err) {\n                handleError(err);\n                return;\n            }\n            closingNotifier.subscribe((closingSubscriber = new OperatorSubscriber(subscriber, openWindow, openWindow, handleError)));\n        };\n        openWindow();\n        source.subscribe(new OperatorSubscriber(subscriber, function (value) { return window.next(value); }, function () {\n            window.complete();\n            subscriber.complete();\n        }, handleError, function () {\n            closingSubscriber === null || closingSubscriber === void 0 ? void 0 : closingSubscriber.unsubscribe();\n            window = null;\n        }));\n    });\n}\n//# sourceMappingURL=windowWhen.js.map"]},"metadata":{},"sourceType":"module"}