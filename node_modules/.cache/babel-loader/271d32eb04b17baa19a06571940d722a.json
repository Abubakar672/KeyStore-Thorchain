{"ast":null,"code":"import { Network, TxType, singleFee, FeeType, FeeOption } from '@xchainjs/xchain-client';\nimport { CosmosSDKClient } from '@xchainjs/xchain-cosmos';\nimport { validatePhrase } from '@xchainjs/xchain-crypto';\nimport { assetToString, AssetRuneNative, Chain, assetFromString, baseAmount } from '@xchainjs/xchain-util';\nimport axios from 'axios';\nimport { AccAddress, Msg, codec } from 'cosmos-client';\nimport { StdTx } from 'cosmos-client/x/auth';\nimport { MsgSend, MsgMultiSend } from 'cosmos-client/x/bank';\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\n\n/* global Reflect, Promise */\n\nvar extendStatics = function (d, b) {\n  extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n  };\n\n  return extendStatics(d, b);\n};\n\nfunction __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n\n  function __() {\n    this.constructor = d;\n  }\n\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nfunction __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nfunction __generator(thisArg, body) {\n  var _ = {\n    label: 0,\n    sent: function () {\n      if (t[0] & 1) throw t[1];\n      return t[1];\n    },\n    trys: [],\n    ops: []\n  },\n      f,\n      y,\n      t,\n      g;\n  return g = {\n    next: verb(0),\n    \"throw\": verb(1),\n    \"return\": verb(2)\n  }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () {\n    return this;\n  }), g;\n\n  function verb(n) {\n    return function (v) {\n      return step([n, v]);\n    };\n  }\n\n  function step(op) {\n    if (f) throw new TypeError(\"Generator is already executing.\");\n\n    while (_) try {\n      if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n      if (y = 0, t) op = [op[0] & 2, t.value];\n\n      switch (op[0]) {\n        case 0:\n        case 1:\n          t = op;\n          break;\n\n        case 4:\n          _.label++;\n          return {\n            value: op[1],\n            done: false\n          };\n\n        case 5:\n          _.label++;\n          y = op[1];\n          op = [0];\n          continue;\n\n        case 7:\n          op = _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n\n        default:\n          if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n            _ = 0;\n            continue;\n          }\n\n          if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n            _.label = op[1];\n            break;\n          }\n\n          if (op[0] === 6 && _.label < t[1]) {\n            _.label = t[1];\n            t = op;\n            break;\n          }\n\n          if (t && _.label < t[2]) {\n            _.label = t[2];\n\n            _.ops.push(op);\n\n            break;\n          }\n\n          if (t[2]) _.ops.pop();\n\n          _.trys.pop();\n\n          continue;\n      }\n\n      op = body.call(thisArg, _);\n    } catch (e) {\n      op = [6, e];\n      y = 0;\n    } finally {\n      f = t = 0;\n    }\n\n    if (op[0] & 5) throw op[1];\n    return {\n      value: op[0] ? op[1] : void 0,\n      done: true\n    };\n  }\n}\n\nfunction __spreadArray(to, from) {\n  for (var i = 0, il = from.length, j = to.length; i < il; i++, j++) to[j] = from[i];\n\n  return to;\n}\n\nvar MsgNativeTx =\n/** @class */\nfunction (_super) {\n  __extends(MsgNativeTx, _super);\n\n  function MsgNativeTx(coins, memo, signer) {\n    var _this = _super.call(this) || this;\n\n    _this.coins = coins;\n    _this.memo = memo;\n    _this.signer = signer;\n    return _this;\n  }\n\n  return MsgNativeTx;\n}(Msg);\n/**\r\n * This creates MsgNativeTx from json.\r\n *\r\n * @param value\r\n * @returns {MsgNativeTx}\r\n */\n\n\nvar msgNativeTxFromJson = function (value) {\n  return new MsgNativeTx(value.coins, value.memo, AccAddress.fromBech32(value.signer));\n};\n\nvar DECIMAL = 8;\nvar DEFAULT_GAS_VALUE = '2000000';\nvar DEPOSIT_GAS_VALUE = '25000000';\nvar MAX_TX_COUNT = 100;\n/**\r\n * Get denomination from Asset\r\n *\r\n * @param {Asset} asset\r\n * @returns {string} The denomination of the given asset.\r\n */\n\nvar getDenom = function (asset) {\n  if (assetToString(asset) === assetToString(AssetRuneNative)) return 'rune';\n  return asset.symbol;\n};\n/**\r\n * Get denomination with chainname from Asset\r\n *\r\n * @param {Asset} asset\r\n * @returns {string} The denomination with chainname of the given asset.\r\n */\n\n\nvar getDenomWithChain = function (asset) {\n  return Chain.THORChain + \".\" + asset.symbol.toUpperCase();\n};\n/**\r\n * Get Asset from denomination\r\n *\r\n * @param {string} denom\r\n * @returns {Asset|null} The asset of the given denomination.\r\n */\n\n\nvar getAsset = function (denom) {\n  if (denom === getDenom(AssetRuneNative)) return AssetRuneNative;\n  return assetFromString(Chain.THORChain + \".\" + denom.toUpperCase());\n};\n/**\r\n * Type guard for MsgSend\r\n *\r\n * @param {Msg} msg\r\n * @returns {boolean} `true` or `false`.\r\n */\n\n\nvar isMsgSend = function (msg) {\n  var _a, _b, _c;\n\n  return ((_a = msg) === null || _a === void 0 ? void 0 : _a.amount) !== undefined && ((_b = msg) === null || _b === void 0 ? void 0 : _b.from_address) !== undefined && ((_c = msg) === null || _c === void 0 ? void 0 : _c.to_address) !== undefined;\n};\n/**\r\n * Type guard for MsgMultiSend\r\n *\r\n * @param {Msg} msg\r\n * @returns {boolean} `true` or `false`.\r\n */\n\n\nvar isMsgMultiSend = function (msg) {\n  var _a, _b;\n\n  return ((_a = msg) === null || _a === void 0 ? void 0 : _a.inputs) !== undefined && ((_b = msg) === null || _b === void 0 ? void 0 : _b.outputs) !== undefined;\n};\n/**\r\n * Response guard for transaction broadcast\r\n *\r\n * @param {any} response The response from the node.\r\n * @returns {boolean} `true` or `false`.\r\n */\n\n\nvar isBroadcastSuccess = function (response) {\n  return typeof response === 'object' && response !== null && 'logs' in response && response.logs !== undefined;\n};\n/**\r\n * Get address prefix based on the network.\r\n *\r\n * @param {Network} network\r\n * @returns {string} The address prefix based on the network.\r\n *\r\n **/\n\n\nvar getPrefix = function (network) {\n  switch (network) {\n    case Network.Mainnet:\n      return 'thor';\n\n    case Network.Testnet:\n      return 'tthor';\n  }\n};\n/**\r\n * Get the chain id.\r\n *\r\n * @returns {string} The chain id based on the network.\r\n */\n\n\nvar getChainId = function () {\n  return 'thorchain';\n};\n/**\r\n * Register Codecs based on the prefix.\r\n *\r\n * @param {string} prefix\r\n */\n\n\nvar registerCodecs = function (prefix) {\n  codec.registerCodec('thorchain/MsgSend', MsgSend, MsgSend.fromJSON);\n  codec.registerCodec('thorchain/MsgMultiSend', MsgMultiSend, MsgMultiSend.fromJSON);\n  AccAddress.setBech32Prefix(prefix, prefix + 'pub', prefix + 'valoper', prefix + 'valoperpub', prefix + 'valcons', prefix + 'valconspub');\n};\n/**\r\n * Parse transaction data from event logs\r\n *\r\n * @param {TxLog[]} logs List of tx logs\r\n * @param {Address} address - Address to get transaction data for\r\n * @returns {TxData} Parsed transaction data\r\n */\n\n\nvar getDepositTxDataFromLogs = function (logs, address) {\n  var _a;\n\n  var events = (_a = logs[0]) === null || _a === void 0 ? void 0 : _a.events;\n\n  if (!events) {\n    throw Error('No events in logs available');\n  }\n\n  var transferDataList = events.reduce(function (acc, _a) {\n    var type = _a.type,\n        attributes = _a.attributes;\n\n    if (type === 'transfer') {\n      return attributes.reduce(function (acc2, _a, index) {\n        var key = _a.key,\n            value = _a.value;\n        if (index % 3 === 0) acc2.push({\n          sender: '',\n          recipient: '',\n          amount: baseAmount(0, DECIMAL)\n        });\n        var newData = acc2[acc2.length - 1];\n        if (key === 'sender') newData.sender = value;\n        if (key === 'recipient') newData.recipient = value;\n        if (key === 'amount') newData.amount = baseAmount(value.replace(/rune/, ''), DECIMAL);\n        return acc2;\n      }, acc);\n    }\n\n    return acc;\n  }, []);\n  var txData = transferDataList // filter out txs which are not based on given address\n  .filter(function (_a) {\n    var sender = _a.sender,\n        recipient = _a.recipient;\n    return sender === address || recipient === address;\n  }) // transform `TransferData` -> `TxData`\n  .reduce(function (acc, _a) {\n    var sender = _a.sender,\n        recipient = _a.recipient,\n        amount = _a.amount;\n    return __assign(__assign({}, acc), {\n      from: __spreadArray(__spreadArray([], acc.from), [{\n        amount: amount,\n        from: sender\n      }]),\n      to: __spreadArray(__spreadArray([], acc.to), [{\n        amount: amount,\n        to: recipient\n      }])\n    });\n  }, {\n    from: [],\n    to: [],\n    type: TxType.Transfer\n  });\n  return txData;\n};\n/**\r\n * Get the default fee.\r\n *\r\n * @returns {Fees} The default fee.\r\n */\n\n\nvar getDefaultFees = function () {\n  var fee = baseAmount(DEFAULT_GAS_VALUE, DECIMAL);\n  return singleFee(FeeType.FlatFee, fee);\n};\n/**\r\n * Get transaction type.\r\n *\r\n * @param {string} txData the transaction input data\r\n * @param {string} encoding `base64` or `hex`\r\n * @returns {string} the transaction type.\r\n */\n\n\nvar getTxType = function (txData, encoding) {\n  return Buffer.from(txData, encoding).toString().slice(4);\n};\n/**\r\n * Structure StdTx from MsgNativeTx.\r\n *\r\n * @param {string} txId The transaction id.\r\n * @returns {Tx} The transaction details of the given transaction id.\r\n *\r\n * @throws {\"Invalid client url\"} Thrown if the client url is an invalid one.\r\n */\n\n\nvar buildDepositTx = function (msgNativeTx, nodeUrl) {\n  return __awaiter(void 0, void 0, void 0, function () {\n    var response, fee, unsignedStdTx;\n\n    var _a, _b;\n\n    return __generator(this, function (_c) {\n      switch (_c.label) {\n        case 0:\n          return [4\n          /*yield*/\n          , axios.post(nodeUrl + \"/thorchain/deposit\", {\n            coins: msgNativeTx.coins,\n            memo: msgNativeTx.memo,\n            base_req: {\n              chain_id: getChainId(),\n              from: msgNativeTx.signer\n            }\n          })];\n\n        case 1:\n          response = _c.sent().data;\n          if (!response || !response.value) throw new Error('Invalid client url');\n          fee = (_b = (_a = response.value) === null || _a === void 0 ? void 0 : _a.fee) !== null && _b !== void 0 ? _b : {\n            amount: []\n          };\n          unsignedStdTx = StdTx.fromJSON({\n            msg: response.value.msg,\n            // override fee\n            fee: __assign(__assign({}, fee), {\n              gas: DEPOSIT_GAS_VALUE\n            }),\n            signatures: [],\n            memo: ''\n          });\n          return [2\n          /*return*/\n          , unsignedStdTx];\n      }\n    });\n  });\n};\n/**\r\n * Get the balance of a given address.\r\n *\r\n * @param {Address} address By default, it will return the balance of the current wallet. (optional)\r\n * @param {Asset} asset If not set, it will return all assets available. (optional)\r\n * @param {cosmosClient} CosmosSDKClient\r\n *\r\n * @returns {Balance[]} The balance of the address.\r\n */\n\n\nvar getBalance = function (_a) {\n  var address = _a.address,\n      assets = _a.assets,\n      cosmosClient = _a.cosmosClient;\n  return __awaiter(void 0, void 0, void 0, function () {\n    var balances;\n    return __generator(this, function (_b) {\n      switch (_b.label) {\n        case 0:\n          return [4\n          /*yield*/\n          , cosmosClient.getBalance(address)];\n\n        case 1:\n          balances = _b.sent();\n          return [2\n          /*return*/\n          , balances.map(function (balance) {\n            return {\n              asset: balance.denom && getAsset(balance.denom) || AssetRuneNative,\n              amount: baseAmount(balance.amount, DECIMAL)\n            };\n          }).filter(function (balance) {\n            return !assets || assets.filter(function (asset) {\n              return assetToString(balance.asset) === assetToString(asset);\n            }).length;\n          })];\n      }\n    });\n  });\n};\n/**\r\n * Get the client url.\r\n *\r\n * @returns {ClientUrl} The client url (both mainnet and testnet) for thorchain.\r\n */\n\n\nvar getDefaultClientUrl = function () {\n  var _a;\n\n  return _a = {}, _a[Network.Testnet] = {\n    node: 'https://testnet.thornode.thorchain.info',\n    rpc: 'https://testnet.rpc.thorchain.info'\n  }, _a[Network.Mainnet] = {\n    node: 'https://thornode.thorchain.info',\n    rpc: 'https://rpc.thorchain.info'\n  }, _a;\n};\n\nvar DEFAULT_EXPLORER_URL = 'https://viewblock.io/thorchain';\n/**\r\n * Get default explorer urls.\r\n *\r\n * @returns {ExplorerUrls} Default explorer urls (both mainnet and testnet) for thorchain.\r\n */\n\nvar getDefaultExplorerUrls = function () {\n  var _a, _b, _c;\n\n  var root = (_a = {}, _a[Network.Testnet] = DEFAULT_EXPLORER_URL + \"?network=testnet\", _a[Network.Mainnet] = DEFAULT_EXPLORER_URL, _a);\n  var txUrl = DEFAULT_EXPLORER_URL + \"/tx\";\n  var tx = (_b = {}, _b[Network.Testnet] = txUrl, _b[Network.Mainnet] = txUrl, _b);\n  var addressUrl = DEFAULT_EXPLORER_URL + \"/address\";\n  var address = (_c = {}, _c[Network.Testnet] = addressUrl, _c[Network.Mainnet] = addressUrl, _c);\n  return {\n    root: root,\n    tx: tx,\n    address: address\n  };\n};\n/**\r\n * Get the explorer url.\r\n *\r\n * @param {Network} network\r\n * @param {ExplorerUrls} Explorer urls\r\n * @returns {string} The explorer url for thorchain based on the given network.\r\n */\n\n\nvar getExplorerUrl = function (_a, network) {\n  var root = _a.root;\n  return root[network];\n};\n/**\r\n * Get explorer address url.\r\n *\r\n * @param {ExplorerUrls} Explorer urls\r\n * @param {Network} network\r\n * @param {Address} address\r\n * @returns {string} The explorer url for the given address.\r\n */\n\n\nvar getExplorerAddressUrl = function (_a) {\n  var urls = _a.urls,\n      network = _a.network,\n      address = _a.address;\n  var url = urls.address[network] + \"/\" + address;\n\n  switch (network) {\n    case Network.Mainnet:\n      return url;\n\n    case Network.Testnet:\n      return url + \"?network=testnet\";\n  }\n};\n/**\r\n * Get transaction url.\r\n *\r\n * @param {ExplorerUrls} Explorer urls\r\n * @param {Network} network\r\n * @param {TxHash} txID\r\n * @returns {string} The explorer url for the given transaction id.\r\n */\n\n\nvar getExplorerTxUrl = function (_a) {\n  var urls = _a.urls,\n      network = _a.network,\n      txID = _a.txID;\n  var url = urls.tx[network] + \"/\" + txID;\n\n  switch (network) {\n    case Network.Mainnet:\n      return url;\n\n    case Network.Testnet:\n      return url + \"?network=testnet\";\n  }\n};\n/**\r\n * Custom Thorchain Client\r\n */\n\n\nvar Client =\n/** @class */\nfunction () {\n  /**\r\n   * Constructor\r\n   *\r\n   * Client has to be initialised with network type and phrase.\r\n   * It will throw an error if an invalid phrase has been passed.\r\n   *\r\n   * @param {XChainClientParams} params\r\n   *\r\n   * @throws {\"Invalid phrase\"} Thrown if the given phase is invalid.\r\n   */\n  function Client(_a) {\n    var _b;\n\n    var _this = this;\n\n    var _c = _a.network,\n        network = _c === void 0 ? Network.Testnet : _c,\n        phrase = _a.phrase,\n        clientUrl = _a.clientUrl,\n        explorerUrls = _a.explorerUrls,\n        _d = _a.rootDerivationPaths,\n        rootDerivationPaths = _d === void 0 ? (_b = {}, _b[Network.Mainnet] = \"44'/931'/0'/0/\", _b[Network.Testnet] = \"44'/931'/0'/0/\", _b) : _d;\n    this.phrase = '';\n    /**\r\n     * Get transaction history of a given address with pagination options.\r\n     * By default it will return the transaction history of the current wallet.\r\n     *\r\n     * @param {TxHistoryParams} params The options to get transaction history. (optional)\r\n     * @returns {TxsPage} The transaction history.\r\n     */\n\n    this.getTransactions = function (params) {\n      return __awaiter(_this, void 0, void 0, function () {\n        var messageAction, offset, limit, address, txMinHeight, txMaxHeight, txIncomingHistory, txOutgoingHistory, history, total, txs;\n\n        var _this = this;\n\n        return __generator(this, function (_a) {\n          switch (_a.label) {\n            case 0:\n              messageAction = undefined;\n              offset = (params === null || params === void 0 ? void 0 : params.offset) || 0;\n              limit = (params === null || params === void 0 ? void 0 : params.limit) || 10;\n              address = (params === null || params === void 0 ? void 0 : params.address) || this.getAddress();\n              txMinHeight = undefined;\n              txMaxHeight = undefined;\n              registerCodecs(getPrefix(this.network));\n              return [4\n              /*yield*/\n              , this.cosmosClient.searchTxFromRPC({\n                rpcEndpoint: this.getClientUrl().rpc,\n                messageAction: messageAction,\n                transferRecipient: address,\n                limit: MAX_TX_COUNT,\n                txMinHeight: txMinHeight,\n                txMaxHeight: txMaxHeight\n              })];\n\n            case 1:\n              txIncomingHistory = _a.sent().txs;\n              return [4\n              /*yield*/\n              , this.cosmosClient.searchTxFromRPC({\n                rpcEndpoint: this.getClientUrl().rpc,\n                messageAction: messageAction,\n                transferSender: address,\n                limit: MAX_TX_COUNT,\n                txMinHeight: txMinHeight,\n                txMaxHeight: txMaxHeight\n              })];\n\n            case 2:\n              txOutgoingHistory = _a.sent().txs;\n              history = __spreadArray(__spreadArray([], txIncomingHistory), txOutgoingHistory).sort(function (a, b) {\n                if (a.height !== b.height) return parseInt(b.height) > parseInt(a.height) ? 1 : -1;\n                if (a.hash !== b.hash) return a.hash > b.hash ? 1 : -1;\n                return 0;\n              }).reduce(function (acc, tx) {\n                return __spreadArray(__spreadArray([], acc), acc.length === 0 || acc[acc.length - 1].hash !== tx.hash ? [tx] : []);\n              }, []).filter((params === null || params === void 0 ? void 0 : params.filterFn) ? params.filterFn : function (tx) {\n                return tx;\n              }).filter(function (_, index) {\n                return index < MAX_TX_COUNT;\n              });\n              total = history.length;\n              history = history.filter(function (_, index) {\n                return index >= offset && index < offset + limit;\n              });\n              return [4\n              /*yield*/\n              , Promise.all(history.map(function (_a) {\n                var hash = _a.hash;\n                return _this.getTransactionData(hash, address);\n              }))];\n\n            case 3:\n              txs = _a.sent();\n              return [2\n              /*return*/\n              , {\n                total: total,\n                txs: txs\n              }];\n          }\n        });\n      });\n    };\n\n    this.network = network;\n    this.clientUrl = clientUrl || getDefaultClientUrl();\n    this.explorerUrls = explorerUrls || getDefaultExplorerUrls();\n    this.rootDerivationPaths = rootDerivationPaths;\n    this.cosmosClient = new CosmosSDKClient({\n      server: this.getClientUrl().node,\n      chainId: getChainId(),\n      prefix: getPrefix(this.network)\n    });\n    if (phrase) this.setPhrase(phrase);\n  }\n  /**\r\n   * Purge client.\r\n   *\r\n   * @returns {void}\r\n   */\n\n\n  Client.prototype.purgeClient = function () {\n    this.phrase = '';\n  };\n  /**\r\n   * Set/update the current network.\r\n   *\r\n   * @param {Network} network\r\n   * @returns {void}\r\n   *\r\n   * @throws {\"Network must be provided\"}\r\n   * Thrown if network has not been set before.\r\n   */\n\n\n  Client.prototype.setNetwork = function (network) {\n    if (!network) {\n      throw new Error('Network must be provided');\n    }\n\n    this.network = network;\n    this.cosmosClient.updatePrefix(getPrefix(this.network));\n  };\n  /**\r\n   * Get the current network.\r\n   *\r\n   * @returns {Network}\r\n   */\n\n\n  Client.prototype.getNetwork = function () {\n    return this.network;\n  };\n  /**\r\n   * Set/update the client URL.\r\n   *\r\n   * @param {ClientUrl} clientUrl The client url to be set.\r\n   * @returns {void}\r\n   */\n\n\n  Client.prototype.setClientUrl = function (clientUrl) {\n    this.clientUrl = clientUrl;\n  };\n  /**\r\n   * Get the client url.\r\n   *\r\n   * @returns {NodeUrl} The client url for thorchain based on the current network.\r\n   */\n\n\n  Client.prototype.getClientUrl = function () {\n    return this.clientUrl[this.network];\n  };\n  /**\r\n   * Set/update the explorer URLs.\r\n   *\r\n   * @param {ExplorerUrls} urls The explorer urls to be set.\r\n   * @returns {void}\r\n   */\n\n\n  Client.prototype.setExplorerUrls = function (urls) {\n    this.explorerUrls = urls;\n  };\n  /**\r\n   * Get the explorer url.\r\n   *\r\n   * @returns {string} The explorer url for thorchain based on the current network.\r\n   */\n\n\n  Client.prototype.getExplorerUrl = function () {\n    return this.explorerUrls.root[this.network];\n  };\n  /**\r\n   * Get cosmos client\r\n   * @returns {CosmosSDKClient} current cosmos client\r\n   */\n\n\n  Client.prototype.getCosmosClient = function () {\n    return this.cosmosClient;\n  };\n  /**\r\n   * Get the explorer url for the given address.\r\n   *\r\n   * @param {Address} address\r\n   * @returns {string} The explorer url for the given address.\r\n   */\n\n\n  Client.prototype.getExplorerAddressUrl = function (address) {\n    return getExplorerAddressUrl({\n      urls: this.explorerUrls,\n      network: this.network,\n      address: address\n    });\n  };\n  /**\r\n   * Get the explorer url for the given transaction id.\r\n   *\r\n   * @param {string} txID\r\n   * @returns {string} The explorer url for the given transaction id.\r\n   */\n\n\n  Client.prototype.getExplorerTxUrl = function (txID) {\n    return getExplorerTxUrl({\n      urls: this.explorerUrls,\n      network: this.network,\n      txID: txID\n    });\n  };\n  /**\r\n   * Set/update a new phrase\r\n   *\r\n   * @param {string} phrase A new phrase.\r\n   * @returns {Address} The address from the given phrase\r\n   *\r\n   * @throws {\"Invalid phrase\"}\r\n   * Thrown if the given phase is invalid.\r\n   */\n\n\n  Client.prototype.setPhrase = function (phrase, walletIndex) {\n    if (walletIndex === void 0) {\n      walletIndex = 0;\n    }\n\n    if (this.phrase !== phrase) {\n      if (!validatePhrase(phrase)) {\n        throw new Error('Invalid phrase');\n      }\n\n      this.phrase = phrase;\n    }\n\n    return this.getAddress(walletIndex);\n  };\n  /**\r\n   * Get getFullDerivationPath\r\n   *\r\n   * @param {number} index the HD wallet index\r\n   * @returns {string} The bitcoin derivation path based on the network.\r\n   */\n\n\n  Client.prototype.getFullDerivationPath = function (index) {\n    return this.rootDerivationPaths[this.network] + (\"\" + index);\n  };\n  /**\r\n   * @private\r\n   * Get private key.\r\n   *\r\n   * @returns {PrivKey} The private key generated from the given phrase\r\n   *\r\n   * @throws {\"Phrase not set\"}\r\n   * Throws an error if phrase has not been set before\r\n   * */\n\n\n  Client.prototype.getPrivateKey = function (index) {\n    if (index === void 0) {\n      index = 0;\n    }\n\n    return this.cosmosClient.getPrivKeyFromMnemonic(this.phrase, this.getFullDerivationPath(index));\n  };\n  /**\r\n   * Get the current address.\r\n   *\r\n   * @returns {Address} The current address.\r\n   *\r\n   * @throws {Error} Thrown if phrase has not been set before. A phrase is needed to create a wallet and to derive an address from it.\r\n   */\n\n\n  Client.prototype.getAddress = function (index) {\n    if (index === void 0) {\n      index = 0;\n    }\n\n    var address = this.cosmosClient.getAddressFromMnemonic(this.phrase, this.getFullDerivationPath(index));\n\n    if (!address) {\n      throw new Error('address not defined');\n    }\n\n    return address;\n  };\n  /**\r\n   * Validate the given address.\r\n   *\r\n   * @param {Address} address\r\n   * @returns {boolean} `true` or `false`\r\n   */\n\n\n  Client.prototype.validateAddress = function (address) {\n    return this.cosmosClient.checkAddress(address);\n  };\n  /**\r\n   * Get the balance of a given address.\r\n   *\r\n   * @param {Address} address By default, it will return the balance of the current wallet. (optional)\r\n   * @param {Asset} asset If not set, it will return all assets available. (optional)\r\n   * @returns {Balance[]} The balance of the address.\r\n   */\n\n\n  Client.prototype.getBalance = function (address, assets) {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        return [2\n        /*return*/\n        , getBalance({\n          address: address,\n          assets: assets,\n          cosmosClient: this.getCosmosClient()\n        })];\n      });\n    });\n  };\n  /**\r\n   * Get the transaction details of a given transaction id.\r\n   *\r\n   * @param {string} txId The transaction id.\r\n   * @returns {Tx} The transaction details of the given transaction id.\r\n   */\n\n\n  Client.prototype.getTransactionData = function (txId, address) {\n    return __awaiter(this, void 0, void 0, function () {\n      var txResult, txData, from, to, type;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.cosmosClient.txsHashGet(txId)];\n\n          case 1:\n            txResult = _a.sent();\n            txData = txResult.logs ? getDepositTxDataFromLogs(txResult.logs, address) : null;\n            if (!txData) throw new Error(\"Failed to get transaction data (tx-hash: \" + txId + \")\");\n            from = txData.from, to = txData.to, type = txData.type;\n            return [2\n            /*return*/\n            , {\n              hash: txId,\n              asset: AssetRuneNative,\n              from: from,\n              to: to,\n              date: new Date(txResult.timestamp),\n              type: type\n            }];\n        }\n      });\n    });\n  };\n  /**\r\n   * Get the transaction details of a given transaction id. (from /thorchain/txs/hash)\r\n   *\r\n   * Node: /thorchain/txs/hash response doesn't have timestamp field.\r\n   *\r\n   * @param {string} txId The transaction id.\r\n   * @returns {Tx} The transaction details of the given transaction id.\r\n   */\n\n\n  Client.prototype.getDepositTransaction = function (txId) {\n    return __awaiter(this, void 0, void 0, function () {\n      var result, from, to, asset;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , axios.get(this.getClientUrl().node + \"/thorchain/tx/\" + txId)];\n\n          case 1:\n            result = _a.sent().data;\n            if (!result || !result.observed_tx) throw new Error('transaction not found');\n            from = [];\n            to = [];\n            result.observed_tx.tx.coins.forEach(function (coin) {\n              from.push({\n                from: result.observed_tx.tx.from_address,\n                amount: baseAmount(coin.amount, DECIMAL)\n              });\n              to.push({\n                to: result.observed_tx.tx.to_address,\n                amount: baseAmount(coin.amount, DECIMAL)\n              });\n              asset = assetFromString(coin.asset);\n            });\n            return [2\n            /*return*/\n            , {\n              asset: asset || AssetRuneNative,\n              from: from,\n              to: to,\n              type: TxType.Transfer,\n              hash: txId\n            }];\n        }\n      });\n    });\n  };\n  /**\r\n   * Transaction with MsgNativeTx.\r\n   *\r\n   * @param {DepositParam} params The transaction options.\r\n   * @returns {TxHash} The transaction hash.\r\n   *\r\n   * @throws {\"insufficient funds\"} Thrown if the wallet has insufficient funds.\r\n   * @throws {\"failed to broadcast transaction\"} Thrown if failed to broadcast transaction.\r\n   */\n\n\n  Client.prototype.deposit = function (_a) {\n    var _b, _c;\n\n    var _d = _a.walletIndex,\n        walletIndex = _d === void 0 ? 0 : _d,\n        _e = _a.asset,\n        asset = _e === void 0 ? AssetRuneNative : _e,\n        amount = _a.amount,\n        memo = _a.memo;\n    return __awaiter(this, void 0, void 0, function () {\n      var assetBalance, signer, msgNativeTx, unsignedStdTx, privateKey, accAddress;\n      return __generator(this, function (_f) {\n        switch (_f.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.getBalance(this.getAddress(walletIndex), [asset])];\n\n          case 1:\n            assetBalance = _f.sent();\n\n            if (assetBalance.length === 0 || assetBalance[0].amount.amount().lt(amount.amount().plus(DEFAULT_GAS_VALUE))) {\n              throw new Error('insufficient funds');\n            }\n\n            signer = this.getAddress(walletIndex);\n            msgNativeTx = msgNativeTxFromJson({\n              coins: [{\n                asset: getDenomWithChain(asset),\n                amount: amount.amount().toString()\n              }],\n              memo: memo,\n              signer: signer\n            });\n            return [4\n            /*yield*/\n            , buildDepositTx(msgNativeTx, this.getClientUrl().node)];\n\n          case 2:\n            unsignedStdTx = _f.sent();\n            privateKey = this.getPrivateKey(walletIndex);\n            accAddress = AccAddress.fromBech32(signer);\n            return [4\n            /*yield*/\n            , this.cosmosClient.signAndBroadcast(unsignedStdTx, privateKey, accAddress)];\n\n          case 3:\n            return [2\n            /*return*/\n            , (_c = (_b = _f.sent()) === null || _b === void 0 ? void 0 : _b.txhash) !== null && _c !== void 0 ? _c : ''];\n        }\n      });\n    });\n  };\n  /**\r\n   * Transfer balances with MsgSend\r\n   *\r\n   * @param {TxParams} params The transfer options.\r\n   * @returns {TxHash} The transaction hash.\r\n   */\n\n\n  Client.prototype.transfer = function (_a) {\n    var _b = _a.walletIndex,\n        walletIndex = _b === void 0 ? 0 : _b,\n        _c = _a.asset,\n        asset = _c === void 0 ? AssetRuneNative : _c,\n        amount = _a.amount,\n        recipient = _a.recipient,\n        memo = _a.memo;\n    return __awaiter(this, void 0, void 0, function () {\n      var assetBalance, fee, transferResult;\n      return __generator(this, function (_d) {\n        switch (_d.label) {\n          case 0:\n            registerCodecs(getPrefix(this.network));\n            return [4\n            /*yield*/\n            , this.getBalance(this.getAddress(walletIndex), [asset])];\n\n          case 1:\n            assetBalance = _d.sent();\n            return [4\n            /*yield*/\n            , this.getFees()];\n\n          case 2:\n            fee = _d.sent();\n\n            if (assetBalance.length === 0 || assetBalance[0].amount.amount().lt(amount.amount().plus(fee[FeeOption.Average].amount()))) {\n              throw new Error('insufficient funds');\n            }\n\n            return [4\n            /*yield*/\n            , this.cosmosClient.transfer({\n              privkey: this.getPrivateKey(walletIndex),\n              from: this.getAddress(walletIndex),\n              to: recipient,\n              amount: amount.amount().toString(),\n              asset: getDenom(asset),\n              memo: memo,\n              fee: {\n                amount: [],\n                gas: DEFAULT_GAS_VALUE\n              }\n            })];\n\n          case 3:\n            transferResult = _d.sent();\n\n            if (!isBroadcastSuccess(transferResult)) {\n              throw new Error(\"failed to broadcast transaction: \" + transferResult.txhash);\n            }\n\n            return [2\n            /*return*/\n            , (transferResult === null || transferResult === void 0 ? void 0 : transferResult.txhash) || ''];\n        }\n      });\n    });\n  };\n  /**\r\n   * Get the fees.\r\n   *\r\n   * @returns {Fees}\r\n   */\n\n\n  Client.prototype.getFees = function () {\n    return __awaiter(this, void 0, void 0, function () {\n      return __generator(this, function (_a) {\n        return [2\n        /*return*/\n        , getDefaultFees()];\n      });\n    });\n  };\n\n  return Client;\n}();\n\nexport { Client, DECIMAL, DEFAULT_GAS_VALUE, DEPOSIT_GAS_VALUE, MAX_TX_COUNT, MsgNativeTx, buildDepositTx, getAsset, getBalance, getChainId, getDefaultClientUrl, getDefaultExplorerUrls, getDefaultFees, getDenom, getDenomWithChain, getDepositTxDataFromLogs, getExplorerAddressUrl, getExplorerTxUrl, getExplorerUrl, getPrefix, getTxType, isBroadcastSuccess, isMsgMultiSend, isMsgSend, msgNativeTxFromJson, registerCodecs };","map":{"version":3,"sources":["/home/abubakar/Desktop/KeyStore-Thorchain/node_modules/@xchainjs/xchain-thorchain/lib/index.esm.js"],"names":["Network","TxType","singleFee","FeeType","FeeOption","CosmosSDKClient","validatePhrase","assetToString","AssetRuneNative","Chain","assetFromString","baseAmount","axios","AccAddress","Msg","codec","StdTx","MsgSend","MsgMultiSend","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__extends","TypeError","String","__","constructor","create","__assign","assign","t","s","i","n","arguments","length","apply","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","Promise","reject","fulfilled","step","next","e","rejected","result","done","then","__generator","body","_","label","sent","trys","ops","f","y","g","verb","Symbol","iterator","v","op","pop","push","__spreadArray","to","from","il","j","MsgNativeTx","_super","coins","memo","signer","_this","msgNativeTxFromJson","fromBech32","DECIMAL","DEFAULT_GAS_VALUE","DEPOSIT_GAS_VALUE","MAX_TX_COUNT","getDenom","asset","symbol","getDenomWithChain","THORChain","toUpperCase","getAsset","denom","isMsgSend","msg","_a","_b","_c","amount","undefined","from_address","to_address","isMsgMultiSend","inputs","outputs","isBroadcastSuccess","response","logs","getPrefix","network","Mainnet","Testnet","getChainId","registerCodecs","prefix","registerCodec","fromJSON","setBech32Prefix","getDepositTxDataFromLogs","address","events","Error","transferDataList","reduce","acc","type","attributes","acc2","index","key","sender","recipient","newData","replace","txData","filter","Transfer","getDefaultFees","fee","FlatFee","getTxType","encoding","Buffer","toString","slice","buildDepositTx","msgNativeTx","nodeUrl","unsignedStdTx","post","base_req","chain_id","data","gas","signatures","getBalance","assets","cosmosClient","balances","map","balance","getDefaultClientUrl","node","rpc","DEFAULT_EXPLORER_URL","getDefaultExplorerUrls","root","txUrl","tx","addressUrl","getExplorerUrl","getExplorerAddressUrl","urls","url","getExplorerTxUrl","txID","Client","phrase","clientUrl","explorerUrls","_d","rootDerivationPaths","getTransactions","params","messageAction","offset","limit","txMinHeight","txMaxHeight","txIncomingHistory","txOutgoingHistory","history","total","txs","getAddress","searchTxFromRPC","rpcEndpoint","getClientUrl","transferRecipient","transferSender","sort","a","height","parseInt","hash","filterFn","all","getTransactionData","server","chainId","setPhrase","purgeClient","setNetwork","updatePrefix","getNetwork","setClientUrl","setExplorerUrls","getCosmosClient","walletIndex","getFullDerivationPath","getPrivateKey","getPrivKeyFromMnemonic","getAddressFromMnemonic","validateAddress","checkAddress","txId","txResult","txsHashGet","date","Date","timestamp","getDepositTransaction","get","observed_tx","forEach","coin","deposit","_e","assetBalance","privateKey","accAddress","_f","lt","plus","signAndBroadcast","txhash","transfer","transferResult","getFees","Average","privkey"],"mappings":"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","sourcesContent":["import { Network, TxType, singleFee, FeeType, FeeOption } from '@xchainjs/xchain-client';\nimport { CosmosSDKClient } from '@xchainjs/xchain-cosmos';\nimport { validatePhrase } from '@xchainjs/xchain-crypto';\nimport { assetToString, AssetRuneNative, Chain, assetFromString, baseAmount } from '@xchainjs/xchain-util';\nimport axios from 'axios';\nimport { AccAddress, Msg, codec } from 'cosmos-client';\nimport { StdTx } from 'cosmos-client/x/auth';\nimport { MsgSend, MsgMultiSend } from 'cosmos-client/x/bank';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nfunction __spreadArray(to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n}\n\nvar MsgNativeTx = /** @class */ (function (_super) {\r\n    __extends(MsgNativeTx, _super);\r\n    function MsgNativeTx(coins, memo, signer) {\r\n        var _this = _super.call(this) || this;\r\n        _this.coins = coins;\r\n        _this.memo = memo;\r\n        _this.signer = signer;\r\n        return _this;\r\n    }\r\n    return MsgNativeTx;\r\n}(Msg));\r\n/**\r\n * This creates MsgNativeTx from json.\r\n *\r\n * @param value\r\n * @returns {MsgNativeTx}\r\n */\r\nvar msgNativeTxFromJson = function (value) {\r\n    return new MsgNativeTx(value.coins, value.memo, AccAddress.fromBech32(value.signer));\r\n};\n\nvar DECIMAL = 8;\r\nvar DEFAULT_GAS_VALUE = '2000000';\r\nvar DEPOSIT_GAS_VALUE = '25000000';\r\nvar MAX_TX_COUNT = 100;\r\n/**\r\n * Get denomination from Asset\r\n *\r\n * @param {Asset} asset\r\n * @returns {string} The denomination of the given asset.\r\n */\r\nvar getDenom = function (asset) {\r\n    if (assetToString(asset) === assetToString(AssetRuneNative))\r\n        return 'rune';\r\n    return asset.symbol;\r\n};\r\n/**\r\n * Get denomination with chainname from Asset\r\n *\r\n * @param {Asset} asset\r\n * @returns {string} The denomination with chainname of the given asset.\r\n */\r\nvar getDenomWithChain = function (asset) {\r\n    return Chain.THORChain + \".\" + asset.symbol.toUpperCase();\r\n};\r\n/**\r\n * Get Asset from denomination\r\n *\r\n * @param {string} denom\r\n * @returns {Asset|null} The asset of the given denomination.\r\n */\r\nvar getAsset = function (denom) {\r\n    if (denom === getDenom(AssetRuneNative))\r\n        return AssetRuneNative;\r\n    return assetFromString(Chain.THORChain + \".\" + denom.toUpperCase());\r\n};\r\n/**\r\n * Type guard for MsgSend\r\n *\r\n * @param {Msg} msg\r\n * @returns {boolean} `true` or `false`.\r\n */\r\nvar isMsgSend = function (msg) {\r\n    var _a, _b, _c;\r\n    return ((_a = msg) === null || _a === void 0 ? void 0 : _a.amount) !== undefined &&\r\n        ((_b = msg) === null || _b === void 0 ? void 0 : _b.from_address) !== undefined &&\r\n        ((_c = msg) === null || _c === void 0 ? void 0 : _c.to_address) !== undefined;\r\n};\r\n/**\r\n * Type guard for MsgMultiSend\r\n *\r\n * @param {Msg} msg\r\n * @returns {boolean} `true` or `false`.\r\n */\r\nvar isMsgMultiSend = function (msg) { var _a, _b; return ((_a = msg) === null || _a === void 0 ? void 0 : _a.inputs) !== undefined && ((_b = msg) === null || _b === void 0 ? void 0 : _b.outputs) !== undefined; };\r\n/**\r\n * Response guard for transaction broadcast\r\n *\r\n * @param {any} response The response from the node.\r\n * @returns {boolean} `true` or `false`.\r\n */\r\nvar isBroadcastSuccess = function (response) {\r\n    return typeof response === 'object' &&\r\n        response !== null &&\r\n        'logs' in response &&\r\n        response.logs !== undefined;\r\n};\r\n/**\r\n * Get address prefix based on the network.\r\n *\r\n * @param {Network} network\r\n * @returns {string} The address prefix based on the network.\r\n *\r\n **/\r\nvar getPrefix = function (network) {\r\n    switch (network) {\r\n        case Network.Mainnet:\r\n            return 'thor';\r\n        case Network.Testnet:\r\n            return 'tthor';\r\n    }\r\n};\r\n/**\r\n * Get the chain id.\r\n *\r\n * @returns {string} The chain id based on the network.\r\n */\r\nvar getChainId = function () { return 'thorchain'; };\r\n/**\r\n * Register Codecs based on the prefix.\r\n *\r\n * @param {string} prefix\r\n */\r\nvar registerCodecs = function (prefix) {\r\n    codec.registerCodec('thorchain/MsgSend', MsgSend, MsgSend.fromJSON);\r\n    codec.registerCodec('thorchain/MsgMultiSend', MsgMultiSend, MsgMultiSend.fromJSON);\r\n    AccAddress.setBech32Prefix(prefix, prefix + 'pub', prefix + 'valoper', prefix + 'valoperpub', prefix + 'valcons', prefix + 'valconspub');\r\n};\r\n/**\r\n * Parse transaction data from event logs\r\n *\r\n * @param {TxLog[]} logs List of tx logs\r\n * @param {Address} address - Address to get transaction data for\r\n * @returns {TxData} Parsed transaction data\r\n */\r\nvar getDepositTxDataFromLogs = function (logs, address) {\r\n    var _a;\r\n    var events = (_a = logs[0]) === null || _a === void 0 ? void 0 : _a.events;\r\n    if (!events) {\r\n        throw Error('No events in logs available');\r\n    }\r\n    var transferDataList = events.reduce(function (acc, _a) {\r\n        var type = _a.type, attributes = _a.attributes;\r\n        if (type === 'transfer') {\r\n            return attributes.reduce(function (acc2, _a, index) {\r\n                var key = _a.key, value = _a.value;\r\n                if (index % 3 === 0)\r\n                    acc2.push({ sender: '', recipient: '', amount: baseAmount(0, DECIMAL) });\r\n                var newData = acc2[acc2.length - 1];\r\n                if (key === 'sender')\r\n                    newData.sender = value;\r\n                if (key === 'recipient')\r\n                    newData.recipient = value;\r\n                if (key === 'amount')\r\n                    newData.amount = baseAmount(value.replace(/rune/, ''), DECIMAL);\r\n                return acc2;\r\n            }, acc);\r\n        }\r\n        return acc;\r\n    }, []);\r\n    var txData = transferDataList\r\n        // filter out txs which are not based on given address\r\n        .filter(function (_a) {\r\n        var sender = _a.sender, recipient = _a.recipient;\r\n        return sender === address || recipient === address;\r\n    })\r\n        // transform `TransferData` -> `TxData`\r\n        .reduce(function (acc, _a) {\r\n        var sender = _a.sender, recipient = _a.recipient, amount = _a.amount;\r\n        return (__assign(__assign({}, acc), { from: __spreadArray(__spreadArray([], acc.from), [{ amount: amount, from: sender }]), to: __spreadArray(__spreadArray([], acc.to), [{ amount: amount, to: recipient }]) }));\r\n    }, { from: [], to: [], type: TxType.Transfer });\r\n    return txData;\r\n};\r\n/**\r\n * Get the default fee.\r\n *\r\n * @returns {Fees} The default fee.\r\n */\r\nvar getDefaultFees = function () {\r\n    var fee = baseAmount(DEFAULT_GAS_VALUE, DECIMAL);\r\n    return singleFee(FeeType.FlatFee, fee);\r\n};\r\n/**\r\n * Get transaction type.\r\n *\r\n * @param {string} txData the transaction input data\r\n * @param {string} encoding `base64` or `hex`\r\n * @returns {string} the transaction type.\r\n */\r\nvar getTxType = function (txData, encoding) {\r\n    return Buffer.from(txData, encoding).toString().slice(4);\r\n};\r\n/**\r\n * Structure StdTx from MsgNativeTx.\r\n *\r\n * @param {string} txId The transaction id.\r\n * @returns {Tx} The transaction details of the given transaction id.\r\n *\r\n * @throws {\"Invalid client url\"} Thrown if the client url is an invalid one.\r\n */\r\nvar buildDepositTx = function (msgNativeTx, nodeUrl) { return __awaiter(void 0, void 0, void 0, function () {\r\n    var response, fee, unsignedStdTx;\r\n    var _a, _b;\r\n    return __generator(this, function (_c) {\r\n        switch (_c.label) {\r\n            case 0: return [4 /*yield*/, axios.post(nodeUrl + \"/thorchain/deposit\", {\r\n                    coins: msgNativeTx.coins,\r\n                    memo: msgNativeTx.memo,\r\n                    base_req: {\r\n                        chain_id: getChainId(),\r\n                        from: msgNativeTx.signer,\r\n                    },\r\n                })];\r\n            case 1:\r\n                response = (_c.sent()).data;\r\n                if (!response || !response.value)\r\n                    throw new Error('Invalid client url');\r\n                fee = (_b = (_a = response.value) === null || _a === void 0 ? void 0 : _a.fee) !== null && _b !== void 0 ? _b : { amount: [] };\r\n                unsignedStdTx = StdTx.fromJSON({\r\n                    msg: response.value.msg,\r\n                    // override fee\r\n                    fee: __assign(__assign({}, fee), { gas: DEPOSIT_GAS_VALUE }),\r\n                    signatures: [],\r\n                    memo: '',\r\n                });\r\n                return [2 /*return*/, unsignedStdTx];\r\n        }\r\n    });\r\n}); };\r\n/**\r\n * Get the balance of a given address.\r\n *\r\n * @param {Address} address By default, it will return the balance of the current wallet. (optional)\r\n * @param {Asset} asset If not set, it will return all assets available. (optional)\r\n * @param {cosmosClient} CosmosSDKClient\r\n *\r\n * @returns {Balance[]} The balance of the address.\r\n */\r\nvar getBalance = function (_a) {\r\n    var address = _a.address, assets = _a.assets, cosmosClient = _a.cosmosClient;\r\n    return __awaiter(void 0, void 0, void 0, function () {\r\n        var balances;\r\n        return __generator(this, function (_b) {\r\n            switch (_b.label) {\r\n                case 0: return [4 /*yield*/, cosmosClient.getBalance(address)];\r\n                case 1:\r\n                    balances = _b.sent();\r\n                    return [2 /*return*/, balances\r\n                            .map(function (balance) { return ({\r\n                            asset: (balance.denom && getAsset(balance.denom)) || AssetRuneNative,\r\n                            amount: baseAmount(balance.amount, DECIMAL),\r\n                        }); })\r\n                            .filter(function (balance) { return !assets || assets.filter(function (asset) { return assetToString(balance.asset) === assetToString(asset); }).length; })];\r\n            }\r\n        });\r\n    });\r\n};\r\n/**\r\n * Get the client url.\r\n *\r\n * @returns {ClientUrl} The client url (both mainnet and testnet) for thorchain.\r\n */\r\nvar getDefaultClientUrl = function () {\r\n    var _a;\r\n    return _a = {},\r\n        _a[Network.Testnet] = {\r\n            node: 'https://testnet.thornode.thorchain.info',\r\n            rpc: 'https://testnet.rpc.thorchain.info',\r\n        },\r\n        _a[Network.Mainnet] = {\r\n            node: 'https://thornode.thorchain.info',\r\n            rpc: 'https://rpc.thorchain.info',\r\n        },\r\n        _a;\r\n};\r\nvar DEFAULT_EXPLORER_URL = 'https://viewblock.io/thorchain';\r\n/**\r\n * Get default explorer urls.\r\n *\r\n * @returns {ExplorerUrls} Default explorer urls (both mainnet and testnet) for thorchain.\r\n */\r\nvar getDefaultExplorerUrls = function () {\r\n    var _a, _b, _c;\r\n    var root = (_a = {},\r\n        _a[Network.Testnet] = DEFAULT_EXPLORER_URL + \"?network=testnet\",\r\n        _a[Network.Mainnet] = DEFAULT_EXPLORER_URL,\r\n        _a);\r\n    var txUrl = DEFAULT_EXPLORER_URL + \"/tx\";\r\n    var tx = (_b = {},\r\n        _b[Network.Testnet] = txUrl,\r\n        _b[Network.Mainnet] = txUrl,\r\n        _b);\r\n    var addressUrl = DEFAULT_EXPLORER_URL + \"/address\";\r\n    var address = (_c = {},\r\n        _c[Network.Testnet] = addressUrl,\r\n        _c[Network.Mainnet] = addressUrl,\r\n        _c);\r\n    return {\r\n        root: root,\r\n        tx: tx,\r\n        address: address,\r\n    };\r\n};\r\n/**\r\n * Get the explorer url.\r\n *\r\n * @param {Network} network\r\n * @param {ExplorerUrls} Explorer urls\r\n * @returns {string} The explorer url for thorchain based on the given network.\r\n */\r\nvar getExplorerUrl = function (_a, network) {\r\n    var root = _a.root;\r\n    return root[network];\r\n};\r\n/**\r\n * Get explorer address url.\r\n *\r\n * @param {ExplorerUrls} Explorer urls\r\n * @param {Network} network\r\n * @param {Address} address\r\n * @returns {string} The explorer url for the given address.\r\n */\r\nvar getExplorerAddressUrl = function (_a) {\r\n    var urls = _a.urls, network = _a.network, address = _a.address;\r\n    var url = urls.address[network] + \"/\" + address;\r\n    switch (network) {\r\n        case Network.Mainnet:\r\n            return url;\r\n        case Network.Testnet:\r\n            return url + \"?network=testnet\";\r\n    }\r\n};\r\n/**\r\n * Get transaction url.\r\n *\r\n * @param {ExplorerUrls} Explorer urls\r\n * @param {Network} network\r\n * @param {TxHash} txID\r\n * @returns {string} The explorer url for the given transaction id.\r\n */\r\nvar getExplorerTxUrl = function (_a) {\r\n    var urls = _a.urls, network = _a.network, txID = _a.txID;\r\n    var url = urls.tx[network] + \"/\" + txID;\r\n    switch (network) {\r\n        case Network.Mainnet:\r\n            return url;\r\n        case Network.Testnet:\r\n            return url + \"?network=testnet\";\r\n    }\r\n};\n\n/**\r\n * Custom Thorchain Client\r\n */\r\nvar Client = /** @class */ (function () {\r\n    /**\r\n     * Constructor\r\n     *\r\n     * Client has to be initialised with network type and phrase.\r\n     * It will throw an error if an invalid phrase has been passed.\r\n     *\r\n     * @param {XChainClientParams} params\r\n     *\r\n     * @throws {\"Invalid phrase\"} Thrown if the given phase is invalid.\r\n     */\r\n    function Client(_a) {\r\n        var _b;\r\n        var _this = this;\r\n        var _c = _a.network, network = _c === void 0 ? Network.Testnet : _c, phrase = _a.phrase, clientUrl = _a.clientUrl, explorerUrls = _a.explorerUrls, _d = _a.rootDerivationPaths, rootDerivationPaths = _d === void 0 ? (_b = {},\r\n            _b[Network.Mainnet] = \"44'/931'/0'/0/\",\r\n            _b[Network.Testnet] = \"44'/931'/0'/0/\",\r\n            _b) : _d;\r\n        this.phrase = '';\r\n        /**\r\n         * Get transaction history of a given address with pagination options.\r\n         * By default it will return the transaction history of the current wallet.\r\n         *\r\n         * @param {TxHistoryParams} params The options to get transaction history. (optional)\r\n         * @returns {TxsPage} The transaction history.\r\n         */\r\n        this.getTransactions = function (params) { return __awaiter(_this, void 0, void 0, function () {\r\n            var messageAction, offset, limit, address, txMinHeight, txMaxHeight, txIncomingHistory, txOutgoingHistory, history, total, txs;\r\n            var _this = this;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        messageAction = undefined;\r\n                        offset = (params === null || params === void 0 ? void 0 : params.offset) || 0;\r\n                        limit = (params === null || params === void 0 ? void 0 : params.limit) || 10;\r\n                        address = (params === null || params === void 0 ? void 0 : params.address) || this.getAddress();\r\n                        txMinHeight = undefined;\r\n                        txMaxHeight = undefined;\r\n                        registerCodecs(getPrefix(this.network));\r\n                        return [4 /*yield*/, this.cosmosClient.searchTxFromRPC({\r\n                                rpcEndpoint: this.getClientUrl().rpc,\r\n                                messageAction: messageAction,\r\n                                transferRecipient: address,\r\n                                limit: MAX_TX_COUNT,\r\n                                txMinHeight: txMinHeight,\r\n                                txMaxHeight: txMaxHeight,\r\n                            })];\r\n                    case 1:\r\n                        txIncomingHistory = (_a.sent()).txs;\r\n                        return [4 /*yield*/, this.cosmosClient.searchTxFromRPC({\r\n                                rpcEndpoint: this.getClientUrl().rpc,\r\n                                messageAction: messageAction,\r\n                                transferSender: address,\r\n                                limit: MAX_TX_COUNT,\r\n                                txMinHeight: txMinHeight,\r\n                                txMaxHeight: txMaxHeight,\r\n                            })];\r\n                    case 2:\r\n                        txOutgoingHistory = (_a.sent()).txs;\r\n                        history = __spreadArray(__spreadArray([], txIncomingHistory), txOutgoingHistory).sort(function (a, b) {\r\n                            if (a.height !== b.height)\r\n                                return parseInt(b.height) > parseInt(a.height) ? 1 : -1;\r\n                            if (a.hash !== b.hash)\r\n                                return a.hash > b.hash ? 1 : -1;\r\n                            return 0;\r\n                        })\r\n                            .reduce(function (acc, tx) { return __spreadArray(__spreadArray([], acc), (acc.length === 0 || acc[acc.length - 1].hash !== tx.hash ? [tx] : [])); }, [])\r\n                            .filter((params === null || params === void 0 ? void 0 : params.filterFn) ? params.filterFn : function (tx) { return tx; })\r\n                            .filter(function (_, index) { return index < MAX_TX_COUNT; });\r\n                        total = history.length;\r\n                        history = history.filter(function (_, index) { return index >= offset && index < offset + limit; });\r\n                        return [4 /*yield*/, Promise.all(history.map(function (_a) {\r\n                                var hash = _a.hash;\r\n                                return _this.getTransactionData(hash, address);\r\n                            }))];\r\n                    case 3:\r\n                        txs = _a.sent();\r\n                        return [2 /*return*/, {\r\n                                total: total,\r\n                                txs: txs,\r\n                            }];\r\n                }\r\n            });\r\n        }); };\r\n        this.network = network;\r\n        this.clientUrl = clientUrl || getDefaultClientUrl();\r\n        this.explorerUrls = explorerUrls || getDefaultExplorerUrls();\r\n        this.rootDerivationPaths = rootDerivationPaths;\r\n        this.cosmosClient = new CosmosSDKClient({\r\n            server: this.getClientUrl().node,\r\n            chainId: getChainId(),\r\n            prefix: getPrefix(this.network),\r\n        });\r\n        if (phrase)\r\n            this.setPhrase(phrase);\r\n    }\r\n    /**\r\n     * Purge client.\r\n     *\r\n     * @returns {void}\r\n     */\r\n    Client.prototype.purgeClient = function () {\r\n        this.phrase = '';\r\n    };\r\n    /**\r\n     * Set/update the current network.\r\n     *\r\n     * @param {Network} network\r\n     * @returns {void}\r\n     *\r\n     * @throws {\"Network must be provided\"}\r\n     * Thrown if network has not been set before.\r\n     */\r\n    Client.prototype.setNetwork = function (network) {\r\n        if (!network) {\r\n            throw new Error('Network must be provided');\r\n        }\r\n        this.network = network;\r\n        this.cosmosClient.updatePrefix(getPrefix(this.network));\r\n    };\r\n    /**\r\n     * Get the current network.\r\n     *\r\n     * @returns {Network}\r\n     */\r\n    Client.prototype.getNetwork = function () {\r\n        return this.network;\r\n    };\r\n    /**\r\n     * Set/update the client URL.\r\n     *\r\n     * @param {ClientUrl} clientUrl The client url to be set.\r\n     * @returns {void}\r\n     */\r\n    Client.prototype.setClientUrl = function (clientUrl) {\r\n        this.clientUrl = clientUrl;\r\n    };\r\n    /**\r\n     * Get the client url.\r\n     *\r\n     * @returns {NodeUrl} The client url for thorchain based on the current network.\r\n     */\r\n    Client.prototype.getClientUrl = function () {\r\n        return this.clientUrl[this.network];\r\n    };\r\n    /**\r\n     * Set/update the explorer URLs.\r\n     *\r\n     * @param {ExplorerUrls} urls The explorer urls to be set.\r\n     * @returns {void}\r\n     */\r\n    Client.prototype.setExplorerUrls = function (urls) {\r\n        this.explorerUrls = urls;\r\n    };\r\n    /**\r\n     * Get the explorer url.\r\n     *\r\n     * @returns {string} The explorer url for thorchain based on the current network.\r\n     */\r\n    Client.prototype.getExplorerUrl = function () {\r\n        return this.explorerUrls.root[this.network];\r\n    };\r\n    /**\r\n     * Get cosmos client\r\n     * @returns {CosmosSDKClient} current cosmos client\r\n     */\r\n    Client.prototype.getCosmosClient = function () {\r\n        return this.cosmosClient;\r\n    };\r\n    /**\r\n     * Get the explorer url for the given address.\r\n     *\r\n     * @param {Address} address\r\n     * @returns {string} The explorer url for the given address.\r\n     */\r\n    Client.prototype.getExplorerAddressUrl = function (address) {\r\n        return getExplorerAddressUrl({ urls: this.explorerUrls, network: this.network, address: address });\r\n    };\r\n    /**\r\n     * Get the explorer url for the given transaction id.\r\n     *\r\n     * @param {string} txID\r\n     * @returns {string} The explorer url for the given transaction id.\r\n     */\r\n    Client.prototype.getExplorerTxUrl = function (txID) {\r\n        return getExplorerTxUrl({ urls: this.explorerUrls, network: this.network, txID: txID });\r\n    };\r\n    /**\r\n     * Set/update a new phrase\r\n     *\r\n     * @param {string} phrase A new phrase.\r\n     * @returns {Address} The address from the given phrase\r\n     *\r\n     * @throws {\"Invalid phrase\"}\r\n     * Thrown if the given phase is invalid.\r\n     */\r\n    Client.prototype.setPhrase = function (phrase, walletIndex) {\r\n        if (walletIndex === void 0) { walletIndex = 0; }\r\n        if (this.phrase !== phrase) {\r\n            if (!validatePhrase(phrase)) {\r\n                throw new Error('Invalid phrase');\r\n            }\r\n            this.phrase = phrase;\r\n        }\r\n        return this.getAddress(walletIndex);\r\n    };\r\n    /**\r\n     * Get getFullDerivationPath\r\n     *\r\n     * @param {number} index the HD wallet index\r\n     * @returns {string} The bitcoin derivation path based on the network.\r\n     */\r\n    Client.prototype.getFullDerivationPath = function (index) {\r\n        return this.rootDerivationPaths[this.network] + (\"\" + index);\r\n    };\r\n    /**\r\n     * @private\r\n     * Get private key.\r\n     *\r\n     * @returns {PrivKey} The private key generated from the given phrase\r\n     *\r\n     * @throws {\"Phrase not set\"}\r\n     * Throws an error if phrase has not been set before\r\n     * */\r\n    Client.prototype.getPrivateKey = function (index) {\r\n        if (index === void 0) { index = 0; }\r\n        return this.cosmosClient.getPrivKeyFromMnemonic(this.phrase, this.getFullDerivationPath(index));\r\n    };\r\n    /**\r\n     * Get the current address.\r\n     *\r\n     * @returns {Address} The current address.\r\n     *\r\n     * @throws {Error} Thrown if phrase has not been set before. A phrase is needed to create a wallet and to derive an address from it.\r\n     */\r\n    Client.prototype.getAddress = function (index) {\r\n        if (index === void 0) { index = 0; }\r\n        var address = this.cosmosClient.getAddressFromMnemonic(this.phrase, this.getFullDerivationPath(index));\r\n        if (!address) {\r\n            throw new Error('address not defined');\r\n        }\r\n        return address;\r\n    };\r\n    /**\r\n     * Validate the given address.\r\n     *\r\n     * @param {Address} address\r\n     * @returns {boolean} `true` or `false`\r\n     */\r\n    Client.prototype.validateAddress = function (address) {\r\n        return this.cosmosClient.checkAddress(address);\r\n    };\r\n    /**\r\n     * Get the balance of a given address.\r\n     *\r\n     * @param {Address} address By default, it will return the balance of the current wallet. (optional)\r\n     * @param {Asset} asset If not set, it will return all assets available. (optional)\r\n     * @returns {Balance[]} The balance of the address.\r\n     */\r\n    Client.prototype.getBalance = function (address, assets) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, getBalance({ address: address, assets: assets, cosmosClient: this.getCosmosClient() })];\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Get the transaction details of a given transaction id.\r\n     *\r\n     * @param {string} txId The transaction id.\r\n     * @returns {Tx} The transaction details of the given transaction id.\r\n     */\r\n    Client.prototype.getTransactionData = function (txId, address) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var txResult, txData, from, to, type;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, this.cosmosClient.txsHashGet(txId)];\r\n                    case 1:\r\n                        txResult = _a.sent();\r\n                        txData = txResult.logs ? getDepositTxDataFromLogs(txResult.logs, address) : null;\r\n                        if (!txData)\r\n                            throw new Error(\"Failed to get transaction data (tx-hash: \" + txId + \")\");\r\n                        from = txData.from, to = txData.to, type = txData.type;\r\n                        return [2 /*return*/, {\r\n                                hash: txId,\r\n                                asset: AssetRuneNative,\r\n                                from: from,\r\n                                to: to,\r\n                                date: new Date(txResult.timestamp),\r\n                                type: type,\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Get the transaction details of a given transaction id. (from /thorchain/txs/hash)\r\n     *\r\n     * Node: /thorchain/txs/hash response doesn't have timestamp field.\r\n     *\r\n     * @param {string} txId The transaction id.\r\n     * @returns {Tx} The transaction details of the given transaction id.\r\n     */\r\n    Client.prototype.getDepositTransaction = function (txId) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var result, from, to, asset;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0: return [4 /*yield*/, axios.get(this.getClientUrl().node + \"/thorchain/tx/\" + txId)];\r\n                    case 1:\r\n                        result = (_a.sent()).data;\r\n                        if (!result || !result.observed_tx)\r\n                            throw new Error('transaction not found');\r\n                        from = [];\r\n                        to = [];\r\n                        result.observed_tx.tx.coins.forEach(function (coin) {\r\n                            from.push({\r\n                                from: result.observed_tx.tx.from_address,\r\n                                amount: baseAmount(coin.amount, DECIMAL),\r\n                            });\r\n                            to.push({\r\n                                to: result.observed_tx.tx.to_address,\r\n                                amount: baseAmount(coin.amount, DECIMAL),\r\n                            });\r\n                            asset = assetFromString(coin.asset);\r\n                        });\r\n                        return [2 /*return*/, {\r\n                                asset: asset || AssetRuneNative,\r\n                                from: from,\r\n                                to: to,\r\n                                type: TxType.Transfer,\r\n                                hash: txId,\r\n                            }];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Transaction with MsgNativeTx.\r\n     *\r\n     * @param {DepositParam} params The transaction options.\r\n     * @returns {TxHash} The transaction hash.\r\n     *\r\n     * @throws {\"insufficient funds\"} Thrown if the wallet has insufficient funds.\r\n     * @throws {\"failed to broadcast transaction\"} Thrown if failed to broadcast transaction.\r\n     */\r\n    Client.prototype.deposit = function (_a) {\r\n        var _b, _c;\r\n        var _d = _a.walletIndex, walletIndex = _d === void 0 ? 0 : _d, _e = _a.asset, asset = _e === void 0 ? AssetRuneNative : _e, amount = _a.amount, memo = _a.memo;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var assetBalance, signer, msgNativeTx, unsignedStdTx, privateKey, accAddress;\r\n            return __generator(this, function (_f) {\r\n                switch (_f.label) {\r\n                    case 0: return [4 /*yield*/, this.getBalance(this.getAddress(walletIndex), [asset])];\r\n                    case 1:\r\n                        assetBalance = _f.sent();\r\n                        if (assetBalance.length === 0 || assetBalance[0].amount.amount().lt(amount.amount().plus(DEFAULT_GAS_VALUE))) {\r\n                            throw new Error('insufficient funds');\r\n                        }\r\n                        signer = this.getAddress(walletIndex);\r\n                        msgNativeTx = msgNativeTxFromJson({\r\n                            coins: [\r\n                                {\r\n                                    asset: getDenomWithChain(asset),\r\n                                    amount: amount.amount().toString(),\r\n                                },\r\n                            ],\r\n                            memo: memo,\r\n                            signer: signer,\r\n                        });\r\n                        return [4 /*yield*/, buildDepositTx(msgNativeTx, this.getClientUrl().node)];\r\n                    case 2:\r\n                        unsignedStdTx = _f.sent();\r\n                        privateKey = this.getPrivateKey(walletIndex);\r\n                        accAddress = AccAddress.fromBech32(signer);\r\n                        return [4 /*yield*/, this.cosmosClient.signAndBroadcast(unsignedStdTx, privateKey, accAddress)];\r\n                    case 3: return [2 /*return*/, (_c = (_b = (_f.sent())) === null || _b === void 0 ? void 0 : _b.txhash) !== null && _c !== void 0 ? _c : ''];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Transfer balances with MsgSend\r\n     *\r\n     * @param {TxParams} params The transfer options.\r\n     * @returns {TxHash} The transaction hash.\r\n     */\r\n    Client.prototype.transfer = function (_a) {\r\n        var _b = _a.walletIndex, walletIndex = _b === void 0 ? 0 : _b, _c = _a.asset, asset = _c === void 0 ? AssetRuneNative : _c, amount = _a.amount, recipient = _a.recipient, memo = _a.memo;\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var assetBalance, fee, transferResult;\r\n            return __generator(this, function (_d) {\r\n                switch (_d.label) {\r\n                    case 0:\r\n                        registerCodecs(getPrefix(this.network));\r\n                        return [4 /*yield*/, this.getBalance(this.getAddress(walletIndex), [asset])];\r\n                    case 1:\r\n                        assetBalance = _d.sent();\r\n                        return [4 /*yield*/, this.getFees()];\r\n                    case 2:\r\n                        fee = _d.sent();\r\n                        if (assetBalance.length === 0 ||\r\n                            assetBalance[0].amount.amount().lt(amount.amount().plus(fee[FeeOption.Average].amount()))) {\r\n                            throw new Error('insufficient funds');\r\n                        }\r\n                        return [4 /*yield*/, this.cosmosClient.transfer({\r\n                                privkey: this.getPrivateKey(walletIndex),\r\n                                from: this.getAddress(walletIndex),\r\n                                to: recipient,\r\n                                amount: amount.amount().toString(),\r\n                                asset: getDenom(asset),\r\n                                memo: memo,\r\n                                fee: {\r\n                                    amount: [],\r\n                                    gas: DEFAULT_GAS_VALUE,\r\n                                },\r\n                            })];\r\n                    case 3:\r\n                        transferResult = _d.sent();\r\n                        if (!isBroadcastSuccess(transferResult)) {\r\n                            throw new Error(\"failed to broadcast transaction: \" + transferResult.txhash);\r\n                        }\r\n                        return [2 /*return*/, (transferResult === null || transferResult === void 0 ? void 0 : transferResult.txhash) || ''];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Get the fees.\r\n     *\r\n     * @returns {Fees}\r\n     */\r\n    Client.prototype.getFees = function () {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            return __generator(this, function (_a) {\r\n                return [2 /*return*/, getDefaultFees()];\r\n            });\r\n        });\r\n    };\r\n    return Client;\r\n}());\n\nexport { Client, DECIMAL, DEFAULT_GAS_VALUE, DEPOSIT_GAS_VALUE, MAX_TX_COUNT, MsgNativeTx, buildDepositTx, getAsset, getBalance, getChainId, getDefaultClientUrl, getDefaultExplorerUrls, getDefaultFees, getDenom, getDenomWithChain, getDepositTxDataFromLogs, getExplorerAddressUrl, getExplorerTxUrl, getExplorerUrl, getPrefix, getTxType, isBroadcastSuccess, isMsgMultiSend, isMsgSend, msgNativeTxFromJson, registerCodecs };\n"]},"metadata":{},"sourceType":"module"}